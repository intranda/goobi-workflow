<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        template="/uii/templatePG/templatePG.html"
        xmlns:x="http://myfaces.apache.org/tomahawk"
        xmlns:intranda="http://xmlns.jcp.org/jsf/composite/compositesPG"
        xmlns:jsf="http://xmlns.jcp.org/jsf">

    <ui:param
            name="myPageTitle"
            value="#{msgs.intranda_administration_vocabularies}"/>

    <ui:define name="breadcrumb">
        <intranda:breadcrumb
                id="index"
                label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}"
                action="index"
                navId="a0"/>
        <intranda:breadcrumb
                id="admin"
                label="#{myPageTitle}"
                action="vocabulary_overview"
                noSeparator="#{true}"/>
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">

        <h:outputText
                styleClass="alert alert-danger d-block"
                value="#{msgs.noAccessAllowed} Admin_Vocabulary"
                rendered="#{!LoginForm.hasRole('Admin_Vocabulary')}"/>

        <h:form
                rendered="#{LoginForm.hasRole('Admin_Vocabulary')}"
                id="myform">
            <main class="row">
                <div class="col-12">

                    <intranda:box
                            boxType="primary"
                            title="#{myPageTitle}"
                            icon="fa-database"
                    >

                        <div class="gw-table gw-table-fixed">

                            <div class="gw-table__search">
                                <div class="gw-table__search__length">
                                    <h:outputText value="#{msgs.treffer}: #{vocabularyBean.paginator.totalResults}"/>
                                </div>
                            </div>

                            <div class="gw-table__wrapper">
                                <x:dataTable
                                        id="vocabularies"
                                        styleClass="table table-hover table-nomargin dataTable table-bordered responsive"
                                        var="item"
                                        value="#{vocabularyBean.paginator.items}">

                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.name}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.name}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.vocabularyManager_description}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.description}"/>
                                    </h:column>

                                    <x:column headerClass="gw-table-fixed__actions">
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.auswahl}"/>
                                        </f:facet>

                                        <div class="gw-table__actions__container">

                                            <!-- edit records -->
                                            <button
                                                    jsf:id="editRecords"
                                                    class="btn btn-blank"
                                                    jsf:rel="tooltip"
                                                    jsf:action="#{vocabularyRecordsBean.load(item)}"
                                                    title="#{msgs.vocabularyManager_editRecords}">
                                                <span class="fa fa-pencil"/>
                                                <f:passThroughAttribute
                                                        name="data-toggle"
                                                        value="tooltip"/>
                                                <f:passThroughAttribute
                                                        name="aria-label"
                                                        value="#{msgs.vocabularyManager_editRecords}"/>
                                            </button>

                                            <!-- edit vocabulary -->
                                            <button
                                                    jsf:id="edit"
                                                    class="btn btn-blank"
                                                    jsf:rel="tooltip"
                                                    jsf:action="#{vocabularyEditBean.load(item)}"
                                                    jsf:rendered="#{LoginForm.hasRole('Admin_Vocabulary_Management')}"
                                                    title="#{msgs.vocabularyManager_editVocabulary}">
                                                <span class="fa fa-cog"/>
                                                <f:passThroughAttribute
                                                        name="data-toggle"
                                                        value="tooltip"/>
                                                <f:passThroughAttribute
                                                        name="aria-label"
                                                        value="#{msgs.vocabularyManager_editVocabulary}"/>
                                            </button>

                                            <ui:fragment
                                                    rendered="#{item.skosExportPossible}">
                                                <a
                                                        href="#{item.rdfXmlExport()}"
                                                        target="_blank"
                                                        class="btn btn-primary-400 margin-left-3">
                                                    <i aria-hidden="true" class="fa fa-file"/>
                                                </a>
                                                <a
                                                        href="#{item.rdfTurtleExport()}"
                                                        target="_blank"
                                                        class="btn btn-primary-400 margin-left-3">
                                                    <i aria-hidden="true" class="fa fa-file-archive-o"/>
                                                </a>
                                            </ui:fragment>
                                        </div>

                                    </x:column>
                                </x:dataTable>

                            </div> <!-- /gw-table__wrapper -->
                        </div> <!-- /gw-table -->


                        <div class="box__actions">
                            <!--                            <button-->
                            <!--                              jsf:id="new"-->
                            <!--                              class="btn btn-primary-400 me-auto"-->
                            <!--                              jsf:action="#{vocabularyBeanLEGACY.newVocabulary}">-->
                            <!--                              <span class="fa fa-plus" />-->
                            <!--                              <span>-->
                            <!--                                <h:outputText value="#{msgs.vocabularyManager_addNewVocabulary}" />-->
                            <!--                              </span>-->
                            <!--                            </button>-->

                            <intranda:paginator id="vocabulary" paginator="#{vocabularyBean.paginator}"/>
                        </div>

                    </intranda:box>
                </div>
            </main>
        </h:form>
    </ui:define>

</ui:composition>
