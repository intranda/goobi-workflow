<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    template="/uii/templatePG/templatePG.html"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/compositesPG"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:form="http://goobi.io/form">

    <ui:param
        name="myPageTitle"
        value="#{msgs.settings}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb
            id="index"
            label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}"
            action="index"
            navId="a0" />
        <intranda:breadcrumb
            id="userConfig"
            label="#{myPageTitle}"
            action="user_config"
            noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <h:form
            id="myform"
            onkeypress="submitOnEnter(event);">
            <main class="row">
                <div class="col-sm-12">
                    <intranda:box
                        boxType="action"
                        boxForm="true"
                        boxPadding="false"
                        boxTitle="false">

                        <intranda:boxTitle
                            title="#{myPageTitle}"
                            icon="fa-cog">
                            <ul class="tabs">
                                <li class="tab #{NavigationForm.uiStatus.user_config ne 'tab2' and NavigationForm.uiStatus.user_config ne 'tab3' and NavigationForm.uiStatus.user_config ne 'tab4' and NavigationForm.uiStatus.user_config ne 'tab5' and NavigationForm.uiStatus.user_config ne 'tab6' and NavigationForm.uiStatus.user_config ne 'tab7'?'active':''}">
                                    <h:commandLink
                                        id="tab1"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.uebersicht}">
                                        <f:setPropertyActionListener
                                            target="#{NavigationForm.uiStatus.user_config}"
                                            value="" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="tab #{NavigationForm.uiStatus.user_config eq 'tab2'?'active':''}">
                                    <h:commandLink
                                        id="tab2"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.user_config_display_general}">
                                        <f:setPropertyActionListener
                                            target="#{NavigationForm.uiStatus.user_config}"
                                            value="tab2" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="tab #{NavigationForm.uiStatus.user_config eq 'tab3'?'active':''}">
                                    <h:commandLink
                                        id="tab3"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.user_config_display_processes}">
                                        <f:setPropertyActionListener
                                            target="#{NavigationForm.uiStatus.user_config}"
                                            value="tab3" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="tab #{NavigationForm.uiStatus.user_config eq 'tab4'?'active':''}">
                                    <h:commandLink
                                        id="tab4"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.user_config_display_tasks}">
                                        <f:setPropertyActionListener
                                            target="#{NavigationForm.uiStatus.user_config}"
                                            value="tab4" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="tab #{NavigationForm.uiStatus.user_config eq 'tab5'?'active':''}">
                                    <h:commandLink
                                        id="tab5"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.user_config_metseditor}">
                                        <f:setPropertyActionListener
                                            target="#{NavigationForm.uiStatus.user_config}"
                                            value="tab5" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <h:panelGroup rendered="#{NavigationForm.emailActive}">
                                    <li class="tab #{NavigationForm.uiStatus.user_config eq 'tab6'?'active':''}">
                                        <h:commandLink
                                            id="tab6"
                                            action="#{NavigationForm.Reload}"
                                            value="#{msgs.mail_notification_user_config_mail}">
                                            <f:setPropertyActionListener
                                                target="#{NavigationForm.uiStatus.user_config}"
                                                value="tab6" />
                                            <f:ajax
                                                render=":myform"
                                                execute=":myform" />
                                        </h:commandLink>
                                    </li>
                                </h:panelGroup>

                                <h:panelGroup rendered="#{LoginForm.hasRole('Admin_ApiKey')}">
                                    <li class="tab #{NavigationForm.uiStatus.user_config eq 'tab7'?'active':''}">
                                        <h:commandLink
                                            id="tab7"
                                            action="#{NavigationForm.Reload}"
                                            value="#{msgs.user_config_api_token}">
                                            <f:setPropertyActionListener
                                                target="#{NavigationForm.uiStatus.user_config}"
                                                value="tab7" />
                                            <f:ajax
                                                render=":myform"
                                                execute=":myform" />
                                        </h:commandLink>
                                    </li>
                                </h:panelGroup>
                            </ul>
                        </intranda:boxTitle>

                        <div class="tab-content">

                            <!-- TAB 1 -->
                            <h:panelGroup layout="block" rendered="#{NavigationForm.uiStatus.user_config ne 'tab2' and NavigationForm.uiStatus.user_config ne 'tab3' and NavigationForm.uiStatus.user_config ne 'tab4' and NavigationForm.uiStatus.user_config ne 'tab5' and NavigationForm.uiStatus.user_config ne 'tab6' and NavigationForm.uiStatus.user_config ne 'tab7'}">
                                <form:field
                                    label="#{msgs.vorname}"
                                    required="true"
                                    help="#{msgs.helpVorname}">
                                    <h:inputText
                                        id="firstname"
                                        class="form-control"
                                        value="#{LoginForm.myBenutzer.vorname}"
                                        readonly="false"
                                        required="true" />
                                    <form:message target="firstname" />
                                </form:field>
                                <form:field
                                    label="#{msgs.nachname}"
                                    required="true"
                                    help="#{msgs.helpNachname}">
                                    <h:inputText
                                        id="lastname"
                                        class="form-control"
                                        value="#{LoginForm.myBenutzer.nachname}"
                                        readonly="false" />
                                    <form:message target="lastname" />
                                </form:field>
                                <form:field
                                    label="#{msgs.standort}"
                                    required="true"
                                    help="#{msgs.helpStandort}">
                                    <h:inputText
                                        id="location"
                                        class="form-control"
                                        value="#{LoginForm.myBenutzer.standort}"
                                        readonly="true" />
                                    <form:message target="location" />
                                </form:field>
                                <form:field
                                    label="#{msgs.email}"
                                    help="#{msgs.helpEmail}">
                                    <h:inputText
                                        id="email"
                                        class="form-control"
                                        value="#{LoginForm.myBenutzer.email}"
                                        readonly="true" />
                                    <form:message target="email" />
                                </form:field>
                                <form:field
                                    label="#{msgs.projekte}"
                                    help="#{msgs.helpProjects}">
                                    <div class="form-control bg-neutral-200">
                                        <ui:repeat
                                            var="intern"
                                            value="#{LoginForm.myBenutzer.projekte}"
                                            varStatus="row">
                                            <h:outputText value="#{intern.titel}" />
                                            <h:outputText
                                                value=", "
                                                rendered="#{!row.last}" />
                                        </ui:repeat>
                                    </div>
                                </form:field>
                                <form:field
                                    label="#{msgs.benutzergruppen}"
                                    help="#{msgs.helpUsergroups}">
                                    <div class="form-control bg-neutral-200">
                                        <ui:repeat
                                            var="intern"
                                            value="#{LoginForm.myBenutzer.benutzergruppen}"
                                            varStatus="row">
                                            <h:outputText value="#{intern.titel}" />
                                            <h:outputText
                                                value=", "
                                                rendered="#{!row.last}" />
                                        </ui:repeat>
                                    </div>
                                </form:field>
                                <form:field
                                    group="true"
                                    label="#{msgs.usergroup_assignedRoles}"
                                    help="#{msgs.helpUserRoles}">
                                    <div>
                                        <ui:repeat
                                            var="role"
                                            value="#{LoginForm.myBenutzer.allUserRoles}"
                                            varStatus="row">
                                            <h:outputText
                                                value="#{fn:startsWith(role,'goobiscript_') ? (msgs.goobiScriptAusfuehren).concat(': ').concat(fn:replace(role, 'goobiscript_', '')) : msgs[('rights_').concat(role)]}"
                                                styleClass="badge badge-no-radius #{fn:startsWith(role,'Admin_') ? 'badge-light-red' :
                                                    fn:startsWith(role,'Statistics_') ? 'badge-light-green' :
                                                    fn:startsWith(role,'Workflow_ProcessTemplates') ? 'badge-light-brown2' :
                                                    fn:startsWith(role,'Workflow_Processes') ? 'badge-light-blue' :
                                                    fn:startsWith(role,'goobiscript_') ? 'badge-light-blue' :
                                                                fn:startsWith(role,'Workflow_') ? 'badge-light-purple' :
                                                    fn:startsWith(role,'Task_') ? 'badge-light-orange' :
                                                    fn:startsWith(role,'Plugin_') ? 'badge-light-lila' :
                                                    'badge-light-greengrey'}">
                                                <f:passThroughAttribute
                                                    name="tabindex"
                                                    value="-1" />
                                            </h:outputText>
                                        </ui:repeat>
                                    </div>
                                </form:field>
                            </h:panelGroup>


                            <!-- TAB 2 -->
                            <h:panelGroup rendered="#{NavigationForm.uiStatus.user_config eq 'tab2'}">
                                <intranda:formInputText
                                    label="#{msgs.timeoutForSession}"
                                    id="sessionTimeout"
                                    field="#{LoginForm.myBenutzer.sessiontimeoutInMinutes}"
                                    help="#{msgs.helpTimeoutForSession}"
                                    name="timeoutForSession">
                                    <f:passThroughAttribute
                                        name="data-gw-focus-on-load"
                                        value="true" />
                                </intranda:formInputText>

                                <intranda:formInputText
                                    label="#{msgs.tabellengroesse}"
                                    id="tableSize"
                                    field="#{LoginForm.myBenutzer.tabellengroesse}"
                                    help="#{msgs.helpTabellengroesse}"
                                    name="tabellengroesse" />

                                <intranda:formInputTextArea
                                    label="#{msgs.user_config_customColumns}"
                                    id="customColumns"
                                    field="#{LoginForm.myBenutzer.customColumns}"
                                    help="#{msgs.help_user_config_customColumns}"
                                    name="customColumnsName" />

                                <intranda:formInputTextArea
                                    label="#{msgs.user_config_customCss}"
                                    id="customCss"
                                    field="#{LoginForm.myBenutzer.customCss}"
                                    help="#{msgs.help_user_config_customCss}"
                                    name="customCssName" />

                                <intranda:formInputTextArea
                                    label="#{msgs.user_config_additionalSearchFields}"
                                    id="additionalSearchFields"
                                    field="#{LoginForm.myBenutzer.additionalSearchFields}"
                                    help="#{msgs.help_user_config_additionalSearchFields}"
                                    name="additionalSearchFields" />

                                <intranda:formInputDropDown
                                    id="dashboard"
                                    label="#{msgs.dashboard}"
                                    field="#{LoginForm.myBenutzer.dashboardPlugin}"
                                    help="#{msgs.helpUserDashboard}"
                                    name="dashboardName"
                                    selectItems="#{LoginForm.myBenutzer.availableDashboards}" />

                                <intranda:formInputTextArea
                                    label="#{msgs.user_dashboard_configuration}"
                                    id="user_dashboard_configuration"
                                    field="#{LoginForm.myBenutzer.dashboardConfiguration}"
                                    help="#{msgs.help_user_dashboard_configuration}"
                                    name="user_dashboard_configuration" />

                                <intranda:formInputDropDown
                                    id="uiMode"
                                    label="#{msgs.user_config_ui_mode}"
                                    field="#{LoginForm.myBenutzer.uiMode}"
                                    help="#{msgs.help_user_config_ui_mode}"
                                    name="uiMode"
                                    selectItems="#{LoginForm.myBenutzer.availableUiModes}" />

                            </h:panelGroup>


                            <!-- TAB 3 -->
                            <h:panelGroup rendered="#{NavigationForm.uiStatus.user_config eq 'tab3'}">
                                <intranda:formInputCheckBox
                                    id="displayDeactivatedProjects"
                                    label="#{msgs.displayDeactivatedProjects}"
                                    field="#{LoginForm.myBenutzer.displayDeactivatedProjects}"
                                    help="#{msgs.helpDisplayDeactivatedProjects}"
                                    name="displayDeactivatedProjectsName" />

                                <intranda:formInputCheckBox
                                    id="displayFinishedProcesses"
                                    label="#{msgs.displayFinishedProcesses}"
                                    field="#{LoginForm.myBenutzer.displayFinishedProcesses}"
                                    help="#{msgs.helpDisplayFinishedProcesses}"
                                    name="displayFinishedProcessesName" />

                                <intranda:formInputCheckBox
                                    label="#{msgs.displaySelectBoxes}"
                                    id="displaySelectBoxes"
                                    field="#{LoginForm.myBenutzer.displaySelectBoxes}"
                                    help="#{msgs.helpDisplaySelectBoxes}"
                                    name="displaySelectBoxesName" />

                                <intranda:formInputCheckBox
                                    label="#{msgs.displayIdColumn}"
                                    id="displayIdColumn"
                                    field="#{LoginForm.myBenutzer.displayIdColumn}"
                                    help="#{msgs.helpDisplayIdColumn}"
                                    name="displayIdColumnName" />

                                <intranda:formInputCheckBox
                                    id="displayBatchColumn"
                                    label="#{msgs.displayBatchColumn}"
                                    field="#{LoginForm.myBenutzer.displayBatchColumn}"
                                    help="#{msgs.helpDisplayBatchColumn}"
                                    name="displayBatchColumnName" />

                                <intranda:formInputCheckBox
                                    id="displayProcessDateColumn"
                                    label="#{msgs.displayProcessDateColumn}"
                                    field="#{LoginForm.myBenutzer.displayProcessDateColumn}"
                                    help="#{msgs.helpDisplayProcessDateColumn}"
                                    name="displayProcessDateColumnName" />

                                <intranda:formInputCheckBox
                                    id="displayProcessRulesetColumn"
                                    label="#{msgs.displayRulesetColumn}"
                                    field="#{LoginForm.myBenutzer.displayRulesetColumn}"
                                    help="#{msgs.helpDisplayRulesetColumn}"
                                    name="displayProcessRulesetColumnName" />

                                <intranda:formInputCheckBox
                                    id="displayLocksColumn"
                                    label="#{msgs.displayLocksColumn}"
                                    field="#{LoginForm.myBenutzer.displayLocksColumn}"
                                    help="#{msgs.helpDisplayLocksColumn}"
                                    name="displayLocksColumnName" />

                                <intranda:formInputCheckBox
                                    id="displaySwappingColumn"
                                    label="#{msgs.displaySwappingColumn}"
                                    field="#{LoginForm.myBenutzer.displaySwappingColumn}"
                                    help="#{msgs.helpDisplaySwappingColumn}"
                                    name="displaySwappingColumnName" />

                                <intranda:formInputCheckBox
                                    id="displayMetadataColumn"
                                    label="#{msgs.displayMetadataColumn}"
                                    field="#{LoginForm.myBenutzer.displayMetadataColumn}"
                                    help="#{msgs.helpDisplayMetadataColumn}"
                                    name="displayMetadataColumnName" />

                                <intranda:formInputCheckBox
                                    id="displayThumbColumn"
                                    label="#{msgs.displayThumbColumn}"
                                    field="#{LoginForm.myBenutzer.displayThumbColumn}"
                                    help="#{msgs.helpDisplayThumbColumn}"
                                    name="displayThumbColumnName" />

                                <intranda:formInputCheckBox
                                    id="displayGridView"
                                    label="#{msgs.displayGridView}"
                                    field="#{LoginForm.myBenutzer.displayGridView}"
                                    help="#{msgs.helpDisplayGridView}"
                                    name="displayGridViewName" />

                                <intranda:formInputCheckBox
                                    id="displayInstitutionColumn"
                                    label="#{msgs.displayInstitutionColumn}"
                                    field="#{LoginForm.myBenutzer.displayInstitutionColumn}"
                                    help="#{msgs.helpDisplayInstitutionColumn}"
                                    name="displayInstitutionColumnName" />

                                <intranda:formInputCheckBox
                                    id="displayNumberOfImagesColumn"
                                    label="#{msgs.displayNumberOfImagesColumn}"
                                    field="#{LoginForm.myBenutzer.displayNumberOfImages}"
                                    help="#{msgs.helpDisplayNumberOfImagesColumn}"
                                    name="displayNumberOfImagesColumnName" />

                                <h:panelGroup rendered="#{HelperForm.showEditionDataEnabled}">
                                    <intranda:formInputCheckBox
                                        id="displayLastEditionDate"
                                        label="#{msgs.displayLastEditionDate}"
                                        field="#{LoginForm.myBenutzer.displayLastEditionDate}"
                                        help="#{msgs.helpDisplayLastEditionDate}"
                                        name="displayLastEditionDate" />
                                    <intranda:formInputCheckBox
                                        id="displayLastEditionUser"
                                        label="#{msgs.displayLastEditionUser}"
                                        field="#{LoginForm.myBenutzer.displayLastEditionUser}"
                                        help="#{msgs.helpDisplayLastEditionUser}"
                                        name="displayLastEditionUser" />
                                    <intranda:formInputCheckBox
                                        id="displayLastEditionTask"
                                        label="#{msgs.displayLastEditionTask}"
                                        field="#{LoginForm.myBenutzer.displayLastEditionTask}"
                                        help="#{msgs.helpDisplayLastEditionTask}"
                                        name="displayLastEditionTask" />

                                </h:panelGroup>

                                <intranda:formInputDropDown
                                    label="#{msgs.defaultSortField}"
                                    id="processSortField"
                                    field="#{LoginForm.myBenutzer.processListDefaultSortField}"
                                    help="#{msgs.helpProcessListDefaultSortField}"
                                    name="processSortFieldName"
                                    selectItems="#{LoginForm.myBenutzer.processListColumnNames}"
                                    required="false" />


                                <div class="row">
                                    <div class="col-12 col-md-3">
                                        <intranda:formLabel
                                            label="#{msgs.defaultSortOrder}"
                                            labelFor="processDefaultSortOrder"
                                            labelRequired="false" />
                                    </div>

                                    <div class="col-12 col-md-9">
                                        <h:selectOneRadio
                                            id="processDefaultSortOrder"
                                            value="#{LoginForm.myBenutzer.processListDefaultSortOrder}"
                                            styleClass="select-radio select-radio-horizontal">
                                            <f:selectItem
                                                itemLabel="#{msgs.defaultSortFieldAsc}"
                                                itemValue=" asc" />
                                            <f:selectItem
                                                itemLabel="#{msgs.defaultSortFieldDesc}"
                                                itemValue=" desc" />
                                        </h:selectOneRadio>

                                        <intranda:formHelp
                                            content="#{msgs.helpProcessDefaultSortOrder}"
                                            msgFor="processDefaultSortOrder" />

                                    </div>
                                </div>
                            </h:panelGroup>


                            <!-- TAB 4 -->
                            <h:panelGroup rendered="#{NavigationForm.uiStatus.user_config eq 'tab4'}">
                                <intranda:formInputCheckBox
                                    label="#{msgs.hideCorrectionTasks}"
                                    id="hideCorrectionTasks"
                                    field="#{LoginForm.myBenutzer.hideCorrectionTasks}"
                                    help="#{msgs.helpHideCorrectionTasks}"
                                    name="hideCorrectionTasksName" />

                                <intranda:formInputCheckBox
                                    id="displayOnlySelectedTasks"
                                    label="#{msgs.displayOnlySelectedTasks}"
                                    field="#{LoginForm.myBenutzer.displayOnlySelectedTasks}"
                                    help="#{msgs.helpDisplayOnlySelectedTasks}"
                                    name="displayOnlySelectedTasksName" />

                                <intranda:formInputCheckBox
                                    label="#{msgs.displayOnlyOpenTasks}"
                                    id="displayOnlyOpenTasks"
                                    field="#{LoginForm.myBenutzer.displayOnlyOpenTasks}"
                                    help="#{msgs.helpDisplayOnlyOpenTasks}"
                                    name="displayOnlyOpenTasksName" />

                                <intranda:formInputCheckBox
                                    id="helpDisplayOtherTasks"
                                    label="#{msgs.showTasksFromOtherUsers}"
                                    field="#{LoginForm.myBenutzer.displayOtherTasks}"
                                    help="#{msgs.helpDisplayOtherTasks}"
                                    name="helpDisplayOtherTasksName" />

                                <intranda:formInputCheckBox
                                    id="displayAutomaticTasks"
                                    label="#{msgs.displayAutomaticTasks}"
                                    field="#{LoginForm.myBenutzer.displayAutomaticTasks}"
                                    help="#{msgs.helpDisplayAutomaticTasks}"
                                    name="displayAutomaticTasksName" />

                                <intranda:formInputDropDown
                                    label="#{msgs.defaultSortField}"
                                    id="taskSortField"
                                    field="#{LoginForm.myBenutzer.taskListDefaultSortingField}"
                                    help="#{msgs.helpTaskListDefaultSortField}"
                                    name="taskSortFieldName"
                                    selectItems="#{LoginForm.myBenutzer.taskListColumnNames}"
                                    required="false" />


                                <div class="row">
                                    <div class="col-12 col-md-3">
                                        <intranda:formLabel
                                            label="#{msgs.defaultSortOrder}"
                                            labelFor="taskDefaultSortOrder"
                                            labelRequired="false" />
                                    </div>

                                    <div class="col-12 col-md-9">
                                        <h:selectOneRadio
                                            id="taskDefaultSortOrder"
                                            value="#{LoginForm.myBenutzer.taskListDefaultSortOrder}"
                                            styleClass="select-radio select-radio-horizontal">
                                            <f:selectItem
                                                itemLabel="#{msgs.defaultSortFieldAsc}"
                                                itemValue=" asc" />
                                            <f:selectItem
                                                itemLabel="#{msgs.defaultSortFieldDesc}"
                                                itemValue=" desc" />
                                        </h:selectOneRadio>

                                        <intranda:formHelp
                                            content="#{msgs.helpTaskDefaultSortOrder}"
                                            msgFor="taskDefaultSortOrder" />
                                    </div>
                                </div>

                            </h:panelGroup>


                            <!-- TAB 5 -->
                            <h:panelGroup rendered="#{NavigationForm.uiStatus.user_config eq 'tab5'}">
                                <intranda:formInputText
                                    label="#{msgs.spracheFuerMetadaten}"
                                    id="spracheFuerMetadaten"
                                    field="#{LoginForm.myBenutzer.metadatenSprache}"
                                    help="#{msgs.helpSpracheFuerMetadaten}"
                                    name="spracheFuerMetadatenName"
                                    required="false" />

                                <div class="row">
                                    <div class="col-12 col-md-3">
                                        <intranda:formLabel
                                            label="#{msgs.metadataSaveTime}"
                                            labelFor="metadataSaveTime"
                                            labelRequired="true" />
                                    </div>

                                    <div class="col-12 col-md-9">
                                        <h:inputText
                                            id="metadataSaveTime"
                                            forceId="true"
                                            styleClass="form-control"
                                            value="#{LoginForm.myBenutzer.metsEditorTime}"
                                            required="true">
                                            <f:validator validatorId="org.goobi.validator.TimeValidator" />
                                        </h:inputText>

                                        <intranda:formHelp
                                            content="#{msgs.helpMetadataSaveTime}"
                                            msgFor="metadataSaveTime" />
                                    </div>
                                </div>

                                <intranda:formInputDropDown
                                    label="#{msgs.metadataShortcut}"
                                    id="shortcut"
                                    field="#{LoginForm.myBenutzer.shortcutPrefix}"
                                    help="#{msgs.helpMetseditorShortcut}"
                                    name="shortcutName"
                                    selectItems="#{HelperForm.possibleShortcuts}"
                                    required="false" />

                                <intranda:formInputCheckBox
                                    label="#{msgs.mets_treeTitle}"
                                    id="metsDisplayTitle"
                                    field="#{LoginForm.myBenutzer.metsDisplayTitle}"
                                    help="#{msgs.helpMetsDisplayTitle}"
                                    name="metsDisplayTitleName" />

                                <intranda:formInputCheckBox
                                    id="metsLinkImage"
                                    label="#{msgs.verlinkungDesBildesMitStrukturelement}"
                                    field="#{LoginForm.myBenutzer.metsLinkImage}"
                                    help="#{msgs.helpMetsLinkImage}"
                                    name="metsLinkImageName" />

                                <intranda:formInputCheckBox
                                    label="#{msgs.mets_treePageNumber}"
                                    id="metsDisplayPageAssignments"
                                    field="#{LoginForm.myBenutzer.metsDisplayPageAssignments}"
                                    help="#{msgs.helpMetsDisplayPageAssignments}"
                                    name="metsDisplayPageAssignmentsName" />

                                <intranda:formInputCheckBox
                                    label="#{msgs.mets_treelevel}"
                                    id="metsDisplayHierarchy"
                                    field="#{LoginForm.myBenutzer.metsDisplayHierarchy}"
                                    help="#{msgs.helpMetsDisplayHierarchy}"
                                    name="metsDisplayHierarchyName" />

                                <intranda:formInputCheckBox
                                    label="#{msgs.mets_displayProcessID}"
                                    id="metsDisplayProcessID"
                                    field="#{LoginForm.myBenutzer.metsDisplayProcessID}"
                                    help="#{msgs.helpMetsDisplayProcessID}"
                                    name="metsDisplayProcessIDName" />
                            </h:panelGroup>


                            <!-- TAB 6 -->
                            <h:panelGroup rendered="#{NavigationForm.uiStatus.user_config eq 'tab6'}">
                                <ui:include src="templatePG/includes/user_config_mail_configuration.xhtml" />
                            </h:panelGroup>


                            <h:panelGroup rendered="#{NavigationForm.uiStatus.user_config eq 'tab7'}">

                                <!-- list all existing api token -->

                                <ui:repeat
                                    var="token"
                                    value="#{LoginForm.myBenutzer.apiToken}">
                                    <div
                                        class="row"
                                        style="border-top: 1px solid var(--clr-neutral-300);"
                                        jsf:rendered="#{token.tokenId != null}">
                                        <div class="col-12 col-md-3">
                                            <intranda:formLabel
                                                label="#{msgs.user_config_token_description}"
                                                labelFor="tokenName"
                                                labelRequired="false" />
                                        </div>
                                        <div class="col-12 col-md-8">
                                            <h:inputText
                                                id="tokenDescription"
                                                styleClass="form-control form__input #{cc.attrs.fieldStyle}"
                                                value="#{token.description}"
                                                required="false"
                                                readonly="true">
                                            </h:inputText>
                                            <h:message
                                                for="tokenDescription"
                                                showDetail="true"
                                                styleClass="help-inline text-danger" />
                                            <!-- Help messages, inline + warning -->
                                            <intranda:formHelp
                                                content="#{msgs.help_user_config_token_description}"
                                                msgFor="tokenDescription" />
                                        </div>
                                        <div class="col-12 col-md-1">
                                            <button
                                                style="float: right"
                                                jsf:id="deleteToken"
                                                class="btn btn-danger"
                                                title="#{msgs.loeschen}"
                                                jsf:action="#{LoginForm.myBenutzer.deleteToken}">
                                                <f:setPropertyActionListener
                                                    target="#{LoginForm.myBenutzer.token}"
                                                    value="#{token}" />
                                                <span class="fa fa-trash-o" />
                                            </button>
                                        </div>

                                        <div class="col-12 col-md-3">allowed methods</div>
                                        <div class="col-12 col-md-9">
                                            <ui:repeat
                                                var="method"
                                                value="#{token.methods}">
                                                <div jsf:rendered="#{method.selected}" style="width: 100%">
                                                    <h:outputText
                                                        style="margin-left: 10px; display:block"
                                                        value="#{method.description} (#{method.methodType} request to #{method.url})" />
                                                </div>
                                            </ui:repeat>
                                        </div>
                                    </div>
                                </ui:repeat>

                                <!-- new token -->
                                <ui:fragment rendered="#{LoginForm.myBenutzer.token != null and LoginForm.myBenutzer.token.tokenId == null}">
                                    <br />
                                    <div
                                        class="row"
                                        style="border-top: 1px solid var(--clr-neutral-300);">
                                        <div class="col-12 col-md-3">
                                            <intranda:formLabel
                                                label="#{msgs.user_config_tokenname}"
                                                labelFor="tokenName"
                                                labelRequired="false" />
                                        </div>
                                        <div class="col-12 col-md-8">
                                            <h:inputText
                                                id="tokenName"
                                                styleClass="form-control form__input"
                                                value="#{LoginForm.myBenutzer.token.encodedTokenName}"
                                                required="false"
                                                readonly="true">
                                            </h:inputText>
                                            <h:outputText styleClass="help-inline text-danger" value="#{msgs.user_config_tokennameWarning}" />
                                        </div>
                                        <div class="col-12 col-md-1">
                                            <button
                                                style="float: right"
                                                jsf:id="deleteToken"
                                                class="btn btn-danger"
                                                title="#{msgs.loeschen}"
                                                jsf:action="#{LoginForm.myBenutzer.deleteToken}">
                                                <f:setPropertyActionListener
                                                    target="#{LoginForm.myBenutzer.token}"
                                                    value="#{LoginForm.myBenutzer.token}" />
                                                <span class="fa fa-trash-o" />
                                            </button>
                                        </div>

                                    </div>
                                    <intranda:formInputText
                                        label="#{msgs.user_config_token_description}"
                                        id="tokenDescrption"
                                        field="#{LoginForm.myBenutzer.token.description}"
                                        help="#{msgs.help_user_config_token_description}"
                                        name="tokenDescrption"
                                        readonly="false"
                                        required="true" />

                                    <ui:repeat
                                        var="method"
                                        value="#{LoginForm.myBenutzer.token.methods}"
                                        varStatus="myVarStatus">

                                        <intranda:formInputCheckBox
                                            label="#{method.description}"
                                            id="ID_#{myVarStatus.index}"
                                            field="#{method.selected}"
                                            help="#{method.methodType} request to #{method.url}"
                                            name="Name_#{myVarStatus.index}" />

                                    </ui:repeat>

                                </ui:fragment>


                                <!-- generate new api token -->
                                <div class="form-actions">
                                    <button
                                        jsf:id="newApiToken"
                                        class="btn btn-primary-400 me-auto"
                                        jsf:action="#{LoginForm.myBenutzer.createNewToken}"
                                        jsf:immediate="true">
                                        <span class="fa fa-plus" />
                                        <span>#{msgs.user_config_newApiToken}</span>

                                    </button>
                                </div>
                            </h:panelGroup>
                        </div>

                        <div class="box__actions">
                            <!-- Cancel -->
                            <h:link
                                id="cancel"
                                styleClass="btn btn-blank"
                                outcome="index"
                                value="#{msgs.abbrechen}" />

                            <!-- Save -->
                            <button
                                class="btn btn-success submitOnEnter pull-right margin-bottom-most font-size-s"
                                jsf:id="absenden"
                                jsf:action="#{LoginForm.BenutzerkonfigurationSpeichern}">
                                <span class="fa fa-save" />
                                <span>
                                    <h:outputText value="#{msgs.speichern}" />
                                </span>
                            </button>
                        </div>

                    </intranda:box>

                </div>
            </main>
        </h:form>
    </ui:define>

</ui:composition>
