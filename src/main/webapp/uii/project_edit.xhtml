<ui:composition
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    template="/uii/template/template.html"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites"
    xmlns:dl="http://goobi.io/dl"
    xmlns:button="http://goobi.io/button">

    <ui:param
        name="myPageTitle"
        value="#{ProjekteForm.myProjekt.id == null?msgs.neuesProjektAnlegen:msgs.projektBearbeiten}" />
    <ui:param
        name="myProjectTitle"
        value="#{ProjekteForm.myProjekt.titel}" />
    <ui:param
        name="myEditProjectTitle"
        value="#{msgs.projektBearbeiten}: #{myProjectTitle}" />
    <ui:param
        name="myBoxTitle"
        value="#{ProjekteForm.myProjekt.id == null?msgs.neuesProjektAnlegen:myEditProjectTitle}" />

    <ui:define name="breadcrumb">
        <intranda:breadcrumb
            id="index"
            label="#{DashboardForm.plugin==null?msgs.startseite:msgs.dashboard}"
            action="index"
            navId="a0" />
        <intranda:breadcrumb
            id="projectsAll"
            label="#{msgs.projekte}"
            action="#{ProjekteForm.paginator.returnToPreviousPage}" />
        <intranda:breadcrumb
            id="projectEdit"
            label="#{myPageTitle}"
            action="project_edit"
            noSeparator="#{true}" />
    </ui:define>

    <ui:define name="info">
    </ui:define>

    <ui:define name="content">
        <h:form
            id="myform"
            onkeypress="submitOnEnter(event);"
            rendered="#{LoginForm.hasRole('Admin_Projects')}"
            enctype="multipart/form-data">

            <main
                id="projectEdit"
                class="row">
                <div class="#{NavigationForm.uiStatus['journalBig']?'col-12':'col-12 col-lg-7'} mb-4">


                    <intranda:box
                        boxType="action"
                        boxForm="true"
                        boxPadding="false"
                        boxTitle="false"
                        id="projecteditbox">


                        <intranda:boxTitle
                            title="#{myBoxTitle}"
                            icon="fa-compass">

                            <ul class="tabs">
                                <li class="tab #{ProjekteForm.displayMode eq ''?'active':''}">
                                    <h:commandLink
                                        id="general"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.general}">
                                        <f:setPropertyActionListener
                                            target="#{ProjekteForm.displayMode}"
                                            value="" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="tab #{ProjekteForm.displayMode eq 'tab2'?'active':''}">
                                    <h:commandLink
                                        id="technicalData"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.technischeDaten}">
                                        <f:setPropertyActionListener
                                            target="#{ProjekteForm.displayMode}"
                                            value="tab2" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="tab #{ProjekteForm.displayMode eq 'tab3'?'active':''}">
                                    <h:commandLink
                                        id="contentSettings"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.contentSettings}">
                                        <f:setPropertyActionListener
                                            target="#{ProjekteForm.displayMode}"
                                            value="tab3" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>
                                <li class="tab #{ProjekteForm.displayMode eq 'tab4' or ProjekteForm.displayMode eq 'filegroups'?'active':''}">
                                    <h:commandLink
                                        id="filegroups"
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.metsfilegroups}">
                                        <f:setPropertyActionListener
                                            target="#{ProjekteForm.displayMode}"
                                            value="tab4" />
                                        <f:ajax
                                            render=":myform"
                                            execute=":myform" />
                                    </h:commandLink>
                                </li>

                                <li class="tab #{ProjekteForm.displayMode eq 'tab5'?'active':''}">
                                    <h:commandLink
                                        action="#{NavigationForm.Reload}"
                                        value="#{msgs.eigenschaften}"
                                        disabled="#{ProjekteForm.myProjekt.id == null}">
                                        <f:setPropertyActionListener
                                            target="#{ProjekteForm.displayMode}"
                                            value="tab5" />
                                        <f:ajax
                                            render="@form"
                                            execute="@form" />
                                    </h:commandLink>
                                </li>

                            </ul>

                        </intranda:boxTitle>

                        <div class="tab-content">
                            <h:panelGroup rendered="#{ProjekteForm.displayMode eq ''}">

                                <!-- title -->
                                <intranda:formInputText
                                    id="title"
                                    name="titel"
                                    label="#{msgs.titel}"
                                    field="#{ProjekteForm.newProjectTitle}"
                                    help="#{msgs.helpProjectTitle}" />

                                <intranda:formInputText
                                    id="projectIdentifier"
                                    name="projectIdentifierName"
                                    label="#{msgs.project_projectIdentifier}"
                                    field="#{ProjekteForm.myProjekt.projectIdentifier}"
                                    help="#{msgs.help_project_projectIdentifier}"
                                    required="false" />

                                <intranda:formInputDropDown
                                    id="institution"
                                    label="#{msgs.institution}"
                                    field="#{ProjekteForm.currentInstitutionID}"
                                    rendered="#{ProjekteForm.institutionsAsSelectList.size()>1}"
                                    help="#{msgs.helpProjectInstitution}"
                                    name="institutionName"
                                    selectItems="#{ProjekteForm.institutionsAsSelectList}"
                                    required="true" />

                                <!-- number of pages -->
                                <intranda:formInputText
                                    id="numberImages"
                                    name="numberImagesName"
                                    label="#{msgs.numberImages}"
                                    field="#{ProjekteForm.myProjekt.numberOfPages}"
                                    help="#{msgs.helpNumberImages}"
                                    required="false" />

                                <!-- number of volumes -->
                                <intranda:formInputText
                                    id="numberVolumes"
                                    name="numberVolumesName"
                                    label="#{msgs.numberVolumes}"
                                    field="#{ProjekteForm.myProjekt.numberOfVolumes}"
                                    help="#{msgs.helpNumberVolumes}"
                                    required="false" />

                                <!-- startdate -->
                                <intranda:formInputCalendar
                                    id="startDate"
                                    name="startdateName"
                                    label="#{msgs.startdate}"
                                    field="#{ProjekteForm.myProjekt.startDate}"
                                    help="#{msgs.helpStartdate}"
                                    required="false" />

                                <!-- enddate -->
                                <intranda:formInputCalendar
                                    id="endDate"
                                    name="enddateName"
                                    label="#{msgs.enddate}"
                                    field="#{ProjekteForm.myProjekt.endDate}"
                                    help="#{msgs.helpEnddate}"
                                    required="false" />

                                <!-- archived -->
                                <intranda:formInputCheckBox
                                    id="inactive"
                                    label="#{msgs.projectIsArchived}"
                                    field="#{ProjekteForm.myProjekt.projectIsArchived}"
                                    help="#{msgs.helpProjectIsArchived}"
                                    name="check" />

                            </h:panelGroup>
                            <h:panelGroup rendered="#{ProjekteForm.displayMode eq 'tab2'}">

                                <!-- internes Speicherformat -->
                                <intranda:formInputDropDown
                                    id="fileFormatInternal"
                                    label="#{msgs.internesSpeicherformat}"
                                    field="#{ProjekteForm.myProjekt.fileFormatInternal}"
                                    help="#{msgs.helpInternesSpeicherformat}"
                                    name="internesSpeicherformat"
                                    selectItems="#{HelperForm.fileFormatsInternalOnly}" />

                                <!-- Speicherformate für das DMS (mehrere möglich) -->
                                <intranda:formInputDropDown
                                    id="fileFormatExternal"
                                    label="#{msgs.dmsExportformat}"
                                    field="#{ProjekteForm.myProjekt.fileFormatDmsExport}"
                                    help="#{msgs.helpDmsExportformat}"
                                    name="dmsExportformat"
                                    selectItems="#{HelperForm.fileFormats}" />

                                <!-- nutzt DMS-Import -->
                                <intranda:formInputCheckBox
                                    id="useDms"
                                    label="#{msgs.automatischerDmsImport}"
                                    field="#{ProjekteForm.myProjekt.useDmsImport}"
                                    help="#{msgs.helpAutomatischerDmsImport}"
                                    name="automatischerDmsImport" />

                                <!-- Dms-Import-XML-DATEI-Pfad -->
                                <intranda:formInputText
                                    id="path"
                                    name="dmsImportPfadXmlDatei"
                                    label="#{msgs.dmsImportPfadXmlDatei}"
                                    field="#{ProjekteForm.myProjekt.dmsImportRootPath}"
                                    help="#{msgs.helpDmsImportPfadXmlDatei}"
                                    required="false" />

                                <!-- Dms-Import-Images-Pfad -->
                                <intranda:formInputText
                                    id="path2"
                                    name="dmsImportSuccessPfad"
                                    label="#{msgs.dmsImportSuccessPfad}"
                                    field="#{ProjekteForm.myProjekt.dmsImportSuccessPath}"
                                    help="#{msgs.helpDmsImportSuccessPfad}"
                                    required="false" />

                                <!-- Dms-Import-Success-Pfad -->
                                <intranda:formInputText
                                    id="path3"
                                    name="dmsImportImagesPfad"
                                    label="#{msgs.dmsImportImagesPfad}"
                                    field="#{ProjekteForm.myProjekt.dmsImportImagesPath}"
                                    help="#{msgs.helpDmsImportImagesPfad}"
                                    required="false" />

                                <!-- Dms-Import-Error-Pfad -->
                                <intranda:formInputText
                                    id="path4"
                                    name="dmsImportErrorPfad"
                                    label="#{msgs.dmsImportErrorPfad}"
                                    field="#{ProjekteForm.myProjekt.dmsImportErrorPath}"
                                    help="#{msgs.helpDmsImportErrorPfad}"
                                    required="false" />

                                <!-- nutzt DMS-Import -->
                                <intranda:formInputCheckBox
                                    id="createFolder"
                                    label="#{msgs.dmsImportCreateProcessFolder}"
                                    field="#{ProjekteForm.myProjekt.dmsImportCreateProcessFolder}"
                                    help="#{msgs.helpDmsImportCreateProcessFolder}"
                                    name="check" />

                                <!-- Timeout -->
                                <intranda:formInputText
                                    id="timeout"
                                    name="timeoutName"
                                    label="#{msgs.timeout} (ms)"
                                    field="#{ProjekteForm.myProjekt.dmsImportTimeOut}"
                                    help="#{msgs.helpTimeoutProject}" />

                            </h:panelGroup>
                            <h:panelGroup rendered="#{ProjekteForm.displayMode eq 'tab3'}">

                                <!-- metsRightsOwner -->
                                <intranda:formInputText
                                    id="metsRightsOwner"
                                    name="metsRightsOwnerName"
                                    label="#{msgs.metsRightsOwner}"
                                    field="#{ProjekteForm.myProjekt.metsRightsOwner}"
                                    help="#{msgs.helpMetsRightsOwner}"
                                    required="false" />

                                <!-- metsRightsOwnerLogo -->
                                <intranda:formInputText
                                    id="metsRightsOwnerLogo"
                                    name="metsRightsOwnerLogoName"
                                    label="#{msgs.metsRightsOwnerLogo}"
                                    field="#{ProjekteForm.myProjekt.metsRightsOwnerLogo}"
                                    help="#{msgs.helpMetsRightsOwnerLogo}"
                                    required="false" />

                                <!-- metsRightsOwnerSite -->
                                <intranda:formInputText
                                    id="metsRightsOwnerSite"
                                    name="metsRightsOwnerSiteName"
                                    label="#{msgs.metsRightsOwnerSite}"
                                    field="#{ProjekteForm.myProjekt.metsRightsOwnerSite}"
                                    help="#{msgs.helpMetsRightsOwnerSite}"
                                    required="false" />

                                <!-- metsRightsOwnerMail -->
                                <intranda:formInputText
                                    id="metsRightsOwnerMail"
                                    name="metsRightsOwnerMailName"
                                    label="#{msgs.metsRightsOwnerMail}"
                                    field="#{ProjekteForm.myProjekt.metsRightsOwnerMail}"
                                    help="#{msgs.helpMetsRightsOwnerMail}"
                                    required="false" />

                                <!-- metsDigiprovReference -->
                                <intranda:formInputText
                                    id="metsDigiprovReference"
                                    name="metsDigiprovReferenceName"
                                    label="#{msgs.metsDigiprovReference}"
                                    field="#{ProjekteForm.myProjekt.metsDigiprovReference}"
                                    help="#{msgs.helpMetsDigiprovReference}"
                                    required="false" />

                                <!-- metsDigiprovPresentation -->
                                <intranda:formInputText
                                    id="metsDigiprovPresentation"
                                    name="metsDigiprovPresentationName"
                                    label="#{msgs.metsDigiprovPresentation}"
                                    field="#{ProjekteForm.myProjekt.metsDigiprovPresentation}"
                                    help="#{msgs.helpMetsDigiprovPresentation}"
                                    required="false" />

                                <!-- metsDigiprovReferenceAnchor -->
                                <intranda:formInputText
                                    id="metsDigiprovReferenceAnchor"
                                    name="metsDigiprovReferenceAnchorName"
                                    label="#{msgs.metsDigiprovReferenceAnchor}"
                                    field="#{ProjekteForm.myProjekt.metsDigiprovReferenceAnchor}"
                                    help="#{msgs.helpMetsDigiprovReferenceAnchor}"
                                    required="false" />

                                <!-- metsDigiprovPresentationAnchor-->
                                <intranda:formInputText
                                    id="metsDigiprovPresentationAnchor"
                                    name="metsDigiprovPresentationAnchorName"
                                    label="#{msgs.metsDigiprovPresentationAnchor}"
                                    field="#{ProjekteForm.myProjekt.metsDigiprovPresentationAnchor}"
                                    help="#{msgs.helpMetsDigiprovPresentationAnchor}"
                                    required="false" />

                                <!-- metsPointerPath -->
                                <intranda:formInputText
                                    id="metsPointerPath"
                                    name="metsPointerPathName"
                                    label="#{msgs.metsPointerPath}"
                                    field="#{ProjekteForm.myProjekt.metsPointerPath}"
                                    help="#{msgs.helpMetsPointerPath}"
                                    required="false" />

                                <!-- metsPointerPathAnchor -->
                                <intranda:formInputText
                                    id="metsPointerPathAnchorName"
                                    name="metsPointerPathAnchor"
                                    label="#{msgs.metsPointerPathAnchor}"
                                    field="#{ProjekteForm.myProjekt.metsPointerPathAnchor}"
                                    help="#{msgs.helpMetsPointerPathAnchor}"
                                    required="false" />

                                <!-- metsPurl -->
                                <intranda:formInputText
                                    id="metsPurl"
                                    name="metsPurlName"
                                    label="#{msgs.metsPurl}"
                                    field="#{ProjekteForm.myProjekt.metsPurl}"
                                    help="#{msgs.helpMetsPurl}"
                                    required="false" />

                                <!-- metsContentIDs -->
                                <intranda:formInputText
                                    id="metsContentIDsName"
                                    name="metsContentIDs"
                                    label="#{msgs.metsContentIDs}"
                                    field="#{ProjekteForm.myProjekt.metsContentIDs}"
                                    help="#{msgs.helpMetsContentIDs}"
                                    required="false" />

                                <!-- metsRightsSponsor -->
                                <intranda:formInputText
                                    id="metsRightsSponsor"
                                    name="metsRightsSponsorName"
                                    label="#{msgs.metsRightsSponsor}"
                                    field="#{ProjekteForm.myProjekt.metsRightsSponsor}"
                                    help="#{msgs.helpMetsRightsSponsor}"
                                    required="false" />

                                <!-- metsRightsSponsorLogo -->
                                <intranda:formInputText
                                    id="metsRightsSponsorLogo"
                                    name="metsRightsSponsorLogoName"
                                    label="#{msgs.metsRightsSponsorLogo}"
                                    field="#{ProjekteForm.myProjekt.metsRightsSponsorLogo}"
                                    help="#{msgs.helpMetsRightsSponsorLogo}"
                                    required="false" />

                                <!-- metsRightsSponsorSiteURL -->
                                <intranda:formInputText
                                    id="metsRightsSponsorSiteURL"
                                    name="metsRightsSponsorSiteURLName"
                                    label="#{msgs.metsRightsSponsorSiteURL}"
                                    field="#{ProjekteForm.myProjekt.metsRightsSponsorSiteURL}"
                                    help="#{msgs.helpMetsRightsSponsorSiteURL}"
                                    required="false" />


                                <!-- metsRightsLicense -->
                                <div class="row">
                                    <div class="col-12 col-md-3">
                                        <h:outputLabel
                                            for="metsRightsLicense"
                                            styleClass="form__label"
                                            value="#{msgs.metsRightsLicense}" />
                                    </div>
                                    <div class="col-12 col-md-9">
                                        <h:selectOneMenu
                                            id="metsRightsLicense"
                                            styleClass="form-select"
                                            value="#{ProjekteForm.myProjekt.metsRightsLicense}">

                                            <f:selectItem
                                                itemLabel="#{msgs.notSelected}"
                                                itemValue="" />
                                            <f:selectItem
                                                itemLabel="PDM"
                                                itemValue="pdm" />
                                            <f:selectItem
                                                itemLabel="CC 0"
                                                itemValue="cc0" />
                                            <f:selectItem
                                                itemLabel="CC-BY"
                                                itemValue="cc-by" />
                                            <f:selectItem
                                                itemLabel="CC-BY-SA"
                                                itemValue="cc-by-sa" />
                                            <f:selectItem
                                                itemLabel="CC-BY-ND"
                                                itemValue="cc-by-nd" />
                                            <f:selectItem
                                                itemLabel="CC-BY-NC"
                                                itemValue="cc-by-nc" />
                                            <f:selectItem
                                                itemLabel="CC-BY-NC-SA"
                                                itemValue="cc-by-nc-sa" />
                                            <f:selectItem
                                                itemLabel="CC-BY-NC-ND"
                                                itemValue="cc-by-nc-nd" />
                                            <f:selectItem
                                                itemLabel="reserved"
                                                itemValue="reserved" />

                                        </h:selectOneMenu>
                                        <h:message
                                            for="metsRightsLicense"
                                            showDetail="true"
                                            styleClass="help-inline font-danger" />
                                        <intranda:formHelp content="#{msgs.helpMetsRightsLicense}" />
                                    </div>
                                </div>

                                <!-- SRU URL -->
                                <intranda:formInputText
                                    id="metsSruURL"
                                    name="metsSruURLName"
                                    label="#{msgs.metsSruURL}"
                                    field="#{ProjekteForm.myProjekt.metsSruUrl}"
                                    help="#{msgs.helpMetsSruUrl}"
                                    required="false" />

                                <!-- IIIF URL -->
                                <intranda:formInputText
                                    id="metsIIIFURL"
                                    name="metsIIIFURLName"
                                    label="#{msgs.metsIIIFURL}"
                                    field="#{ProjekteForm.myProjekt.metsIIIFUrl}"
                                    help="#{msgs.helpMetsIIIFUrl}"
                                    required="false" />

                                <!-- DFG-Viewer URL -->
                                <intranda:formInputText
                                    id="dfgViewerUrl"
                                    name="dfgViewerUrl"
                                    label="#{msgs.metsDfgViewerUrl}"
                                    field="#{ProjekteForm.myProjekt.dfgViewerUrl}"
                                    help="#{msgs.helpMetsDfgViewerUrl}"
                                    required="false" />
                            </h:panelGroup>
                            <h:panelGroup
                                id="filegroups1"
                                rendered="#{ProjekteForm.displayMode eq 'tab4' or ProjekteForm.displayMode eq 'filegroups'}">

                                <!-- ===================== file groups ====================== -->

                                <div class="row">

                                    <div class="col-12 col-md-3 align-items-start">

                                        <h:outputLabel
                                            styleClass="control-label"
                                            value="#{msgs.metsfilegroups}" />
                                    </div>


                                    <h:panelGroup
                                        id="filegroups2"
                                        styleClass="col-12 col-md-9"
                                        rendered="#{ProjekteForm.displayMode eq 'filegroups'}">

                                        <intranda:box
                                            boxType="action"
                                            boxSmall="true"
                                            title="#{msgs.metsfilegroups}"
                                            icon="fa-table"
                                            boxForm="true"
                                            boxPadding="false"
                                            id="filegroupbox">

                                            <intranda:formInputText
                                                id="name"
                                                name="nameName"
                                                label="#{msgs.name}"
                                                field="#{ProjekteForm.myFilegroup.name}"
                                                help="#{msgs.helpFilegroupName}" />

                                            <intranda:formInputText
                                                id="url"
                                                name="path"
                                                label="#{msgs.path}"
                                                field="#{ProjekteForm.myFilegroup.path}"
                                                help="#{msgs.helpFilegroupPath}" />

                                            <h:panelGroup id="mime_suffix">
                                                <intranda:formInputText
                                                    rendered="#{not ProjekteForm.myFilegroup.useOriginalFiles}"
                                                    id="mimetype"
                                                    name="mimetypeName"
                                                    label="#{msgs.mimetype}"
                                                    field="#{ProjekteForm.myFilegroup.mimetype}"
                                                    help="#{msgs.helpFilegroupMimetype}" />

                                                <intranda:formInputText
                                                    rendered="#{not ProjekteForm.myFilegroup.useOriginalFiles}"
                                                    id="suffix"
                                                    name="suffixName"
                                                    label="#{msgs.suffix}"
                                                    field="#{ProjekteForm.myFilegroup.suffix}"
                                                    help="#{msgs.helpFilegroupSuffix}" />
                                            </h:panelGroup>

                                            <intranda:formInputText
                                                id="folder"
                                                name="folderName"
                                                label="#{msgs.validationAgainstFolder}"
                                                field="#{ProjekteForm.myFilegroup.folder}"
                                                required="false"
                                                help="#{msgs.helpFilegroupValidationAgainstFolder}" />

                                            <intranda:formInputCheckBoxAjax
                                                id="useOriginalFiles"
                                                label="#{msgs.projectfilegroup_useOriginalFiles}"
                                                field="#{ProjekteForm.myFilegroup.useOriginalFiles}"
                                                help="#{msgs.helpProjectfilegroup_UseOriginalFiles}"
                                                name="useOriginalFilesName"
                                                ajaxEvent="click"
                                                ajaxRender="myform:projecteditbox:filegroupbox:mime_suffix" />

                                            <intranda:formInputText
                                                id="ignoreMimetypes"
                                                name="ignoreMimetypesName"
                                                label="#{msgs.projectfilegroup_ignoreMimetypes}"
                                                field="#{ProjekteForm.myFilegroup.ignoreMimetypes}"
                                                required="false"
                                                help="#{msgs.helpProjectfilegroup_IgnoreMimetypes}" />

                                            <div class="form-actions">

                                                <!-- Abbrechen-Schaltknopf -->
                                                <button
                                                    jsf:id="cancelFileformat"
                                                    class="btn btn-blank"
                                                    jsf:immediate="true"
                                                    jsf:action="#{ProjekteForm.filegroupCancel}">
                                                    <span>
                                                        <h:outputText value="#{msgs.abbrechen}" />
                                                    </span>
                                                    <f:setPropertyActionListener
                                                        target="#{ProjekteForm.displayMode}"
                                                        value="tab4" />
                                                    <f:ajax render=":myform" />
                                                </button>

                                                <!-- Speichern-Schaltknopf -->
                                                <button
                                                    jsf:id="saveFileformat"
                                                    class="btn btn-success"
                                                    jsf:action="#{ProjekteForm.filegroupSave}"
                                                    title="#{msgs.uebernehmen}">
                                                    <span class="fa fa-save" />
                                                    <span>
                                                        <h:outputText value="#{msgs.save}" />
                                                    </span>
                                                    <f:setPropertyActionListener
                                                        target="#{ProjekteForm.displayMode}"
                                                        value="tab4" />

                                                </button>

                                            </div>

                                        </intranda:box>

                                    </h:panelGroup>


                                    <h:panelGroup
                                        id="filegroups"
                                        styleClass="col-12 col-md-9"
                                        rendered="#{ProjekteForm.displayMode ne 'filegroups'}">

                                        <intranda:box
                                            boxScope="box-mets-filegroups"
                                            boxType="neutral"
                                            boxSmall="true"
                                            boxPadding="true"
                                            title="#{msgs.metsfilegroups}"
                                            icon="fa-table">

                                            <h:dataTable
                                                id="fileformats"
                                                styleClass="table table-hover table-nomargin dataTable table-bordered responsive"
                                                var="item"
                                                value="#{ProjekteForm.fileGroupList}">

                                                <h:column>
                                                    <div class="d-flex justify-content-between align-items-center">

                                                        <div>#{item.name}</div>

                                                        <div class="d-flex gap-2">

                                                            <!-- Edit-Schaltknopf -->
                                                            <button
                                                                jsf:id="edit"
                                                                class="btn btn-neutral-600"
                                                                title="#{msgs.filegroupBearbeiten}"
                                                                jsf:rel="tooltip"
                                                                jsf:action="#{ProjekteForm.filegroupEdit}">
                                                                <span class="fa fa-edit" />
                                                                <f:setPropertyActionListener
                                                                    target="#{ProjekteForm.myFilegroup}"
                                                                    value="#{item}" />
                                                                <f:setPropertyActionListener
                                                                    target="#{ProjekteForm.displayMode}"
                                                                    value="filegroups" />
                                                                <f:ajax render=":myform" />
                                                            </button>

                                                            <!-- Löschen-Schaltknopf -->
                                                            <button
                                                                jsf:id="delete"
                                                                class="btn btn-hot"
                                                                title="#{msgs.filegroupLoeschen}"
                                                                jsf:rel="tooltip"
                                                                jsf:action="#{ProjekteForm.filegroupDelete}">
                                                                <span class="fa fa-trash-o" />
                                                                <f:setPropertyActionListener
                                                                    target="#{ProjekteForm.myFilegroup}"
                                                                    value="#{item}" />
                                                                <f:ajax render=":myform" />
                                                            </button>

                                                        </div>

                                                    </div>
                                                    <!-- end flex container -->

                                                </h:column>

                                            </h:dataTable>

                                            <div class="form__actions">

                                                <!-- Neu-Schaltknopf -->
                                                <button
                                                    jsf:id="newFileformat"
                                                    class="me-auto btn btn-neutral-600"
                                                    jsf:action="#{ProjekteForm.filegroupAdd}"
                                                    jsf:immediate="true">
                                                    <span class="fa fa-plus" />
                                                    <span>
                                                        <h:outputText value="#{msgs.filegroupHinzufuegen}" />
                                                    </span>
                                                    <f:setPropertyActionListener
                                                        target="#{ProjekteForm.displayMode}"
                                                        value="filegroups" />
                                                    <f:ajax render=":myform" />
                                                </button>

                                            </div>
                                            <!-- end form__actions -->

                                        </intranda:box>

                                        <intranda:formHelp content="#{msgs.helpMetsfilegroups}" />
                                    </h:panelGroup>

                                </div>

                            </h:panelGroup>
                            <h:panelGroup rendered="#{ProjekteForm.displayMode eq 'tab5'}">
                                <ui:fragment rendered="#{NavigationForm.uiStatus.projectProperty ne 'editProperties'}">
                                    <dl:list>
                                        <ui:repeat
                                            var="item"
                                            value="#{ProjekteForm.myProjekt.properties}"
                                            varStatus="status">
                                            <dl:term>#{item.titel}</dl:term>
                                            <dl:description>
                                                #{item.wert}
                                                <button:row position="end">
                                                    <button
                                                        jsf:id="editProperty"
                                                        class="btn btn-blank"
                                                        title="#{msgs.bearbeiten}"
                                                        data-bs-toggle="tooltip"
                                                        jsf:action="#{NavigationForm.Reload}">
                                                        <span class="fa fa-pencil" />
                                                        <f:setPropertyActionListener
                                                            target="#{ProjekteForm.currentProperty}"
                                                            value="#{item}" />
                                                        <f:setPropertyActionListener
                                                            target="#{NavigationForm.uiStatus.projectProperty}"
                                                            value="editProperties" />
                                                    </button>
                                                </button:row>
                                            </dl:description>
                                        </ui:repeat>
                                    </dl:list>
                                    <div
                                        class="section-footer p-3 border-bottom">
                                        <button
                                            jsf:action="#{ProjekteForm.newProperty}"
                                            jsf:id="newProperty"
                                            class="btn btn-action">
                                            <span class="fa fa-plus" />
                                            <span>#{msgs.eigenschaftHinzufuegen}</span>
                                            <f:passThroughAttribute
                                                name="data-toggle"
                                                value="tooltip" />
                                            <f:setPropertyActionListener
                                                target="#{NavigationForm.uiStatus.projectProperty}"
                                                value="editProperties" />
                                        </button>
                                    </div>
                                </ui:fragment>
                                <ui:fragment rendered="#{NavigationForm.uiStatus.projectProperty == 'editProperties'}">
                                    <intranda:formInputText
                                        id="propertyTitle"
                                        name="propertyTitle"
                                        label="#{msgs.titel}"
                                        field="#{ProjekteForm.currentProperty.propertyName}"
                                        help="#{msgs.helpPropertyTitle}"
                                        required="true" />
                                    <intranda:formInputText
                                        id="propertyValue"
                                        name="propertyValue"
                                        label="#{msgs.wert}"
                                        field="#{ProjekteForm.currentProperty.propertyValue}"
                                        help="#{msgs.helpPropertyValue}"
                                        required="true" />

                                    <div class="box__actions">
                                        <!-- CANCEL -->
                                        <button
                                            jsf:id="cancelProperty"
                                            class="btn btn-blank"
                                                jsf:immediate="true"
                                            jsf:action="#{NavigationForm.Reload}">
                                            <h:outputText value="#{msgs.abbrechen}" />
                                            <f:setPropertyActionListener
                                                target="#{NavigationForm.uiStatus.projectProperty}"
                                                value="" />
                                        </button>

                                        <!-- SAVE -->
                                        <button
                                            class="btn btn-success submitOnEnter"
                                            jsf:id="saveProperty"
                                            type="submit"
                                            jsf:action="#{ProjekteForm.saveProperty}">
                                            <span class="fa fa-save" />
                                            <span>
                                                <h:outputText value="#{msgs.speichern}" />
                                            </span>
                                            <f:setPropertyActionListener
                                                target="#{NavigationForm.uiStatus.projectProperty}"
                                                value="" />
                                        </button>

                                        <!-- DELETE -->
                                        <button
                                            jsf:id="deleteProperty"
                                            class="btn btn-hot trigger-delete"
                                            onclick="if (!confirm('#{msgs.sollDerContentWirklichGeloeschtWerden}')) return false"
                                            jsf:action="#{ProjekteForm.deleteProperty}"
                                            jsf:rendered="#{ProjekteForm.currentProperty.id != null}">
                                            <span class="fa fa-trash-o" />
                                            <span>
                                                <h:outputText value="#{msgs.loeschen}" />
                                            </span>
                                            <f:setPropertyActionListener
                                                target="#{NavigationForm.uiStatus.projectProperty}"
                                                value="" />
                                        </button>
                                    </div>
                                </ui:fragment>


                            </h:panelGroup>

                        </div>

                        <h:panelGroup
                            rendered="#{ProjekteForm.displayMode ne 'filegroups' and NavigationForm.uiStatus.projectProperty ne 'editProperties'}">
                            <intranda:formButtonArea
                                id="buttons"
                                form="#{ProjekteForm}"
                                object="#{ProjekteForm.myProjekt.id}"
                                actionCancel="#{ProjekteForm.Cancel}" />
                        </h:panelGroup>

                    </intranda:box>

                </div>

                <!-- JOURNAL -->
                <div class="#{NavigationForm.uiStatus['journalBig']?'col-12':'col-12 col-lg-5'}">
                    <ui:fragment rendered="#{ProjekteForm.myProjekt.id != null}">

                        <intranda:journal
                            showBigButton="true"
                            showFolderSelection="false"
                            showImageComments="false"
                            bean="#{ProjekteForm.myProjekt}" />
                    </ui:fragment>

                </div>
                <!-- JOURNAL -->

            </main>

        </h:form>
    </ui:define>

</ui:composition>
