<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"

    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:intranda="http://xmlns.jcp.org/jsf/composite/composites">

    <composite:interface>
    </composite:interface>

    <composite:implementation>
        <ui:fragment
            id="actionarea"
            rendered="#{LoginForm.hasRole('Workflow_Processes') and (LoginForm.hasAnyGoobiScriptRole or LoginForm.hasRole('Workflow_Processes_Allow_Download') or LoginForm.hasRole('Workflow_Processes_Allow_Export') or LoginForm.hasRole('Statistics_General'))}">
            <div class="row mt-4">
                <div class="col-12">
                    <intranda:box
                        id="boxProcessesAllActions"
                        boxType="action"
                        icon="fa-wrench"
                        title="#{msgs.moeglicheAktionen}">
                        <h:form
                            id="actionForm"
                            prependId="false">

                            <!-- LINK PROCESSES INTO OR OUT OF HOME DIRECTORY -->
                            <h:panelGroup rendered="#{ProzessverwaltungForm.allowFolderLinkingForProcessList}">

                                <!-- LINK PROCESSES INTO HOME DIRECTORY -->
                                <h:panelGroup rendered="#{LoginForm.myBenutzer.mitMassendownload and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                    <!-- Upload-Schaltknopf -->
                                    <button
                                        jsf:action="#{ProzessverwaltungForm.uploadFromHomeAlle}"
                                        jsf:id="uploadFromHome"
                                        class="btn btn-link d-block mb-2"
                                        title="#{msgs.verzeichnisFertigAusHomeverzeichnisEntfernen}"
                                        onclick="if (!confirm('#{msgs.upload}')) return false">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-cloud-upload" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.verzeichnisFertigAusHomeverzeichnisEntfernen}" />
                                        </span>
                                    </button>
                                </h:panelGroup>
                                <!-- // LINK PROCESSES INTO HOME DIRECTORY -->

                                <!-- LINK PROCESSES OUT OF HOME DIRECTORY -->
                                <h:panelGroup
                                    styleClass="mb-2"
                                    layout="block"
                                    rendered="#{LoginForm.myBenutzer.mitMassendownload and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">


                                    <button
                                        type="button"
                                        class="btn btn-link"
                                        data-bs-toggle="collapse"
                                        data-bs-target="#possibleActions1"
                                        aria-expanded="false"
                                        aria-controls="possibleActions1">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-cloud-download" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.downloadInMeinHomeverzeichnis}" />
                                        </span>
                                    </button>


                                    <div
                                        id="possibleActions1"
                                        class="collapse">

                                        <!-- Download-Schaltknopf für Selection-->
                                        <button
                                            jsf:action="#{ProzessverwaltungForm.downloadToHomeSelection}"
                                            jsf:id="downloadToHomeSelection"
                                            class="btn btn-link ms-5 d-block"
                                            jsf:rendered="#{ProzessverwaltungForm.anzeigeAnpassen['selectionBoxes']}"
                                            title="#{msgs.auswahl2}"
                                            onclick="if (!confirm('#{msgs.download}')) return false">
                                            <span class="btn btn-blank">
                                                <span class="fa fa-angle-right" />
                                            </span>
                                            <span>
                                                <h:outputText value="#{msgs.auswahl2}" />
                                            </span>
                                        </button>
                                        <!-- Download-Schaltknopf für Page-->
                                        <button
                                            jsf:action="#{ProzessverwaltungForm.downloadToHomePage}"
                                            class="btn btn-link ms-5 d-block"
                                            title="#{msgs.trefferDieserSeite}"
                                            onclick="if (!confirm('#{msgs.download}')) return false"
                                            jsf:id="downloadToHomePage">
                                            <span class="btn btn-blank">
                                                <span class="fa fa-angle-right" />
                                            </span>
                                            <span>
                                                <h:outputText value="#{msgs.trefferDieserSeite}" />
                                            </span>
                                        </button>
                                        <!-- Download-Schaltknopf für gesamtes Trefferset -->
                                        <button
                                            jsf:action="#{ProzessverwaltungForm.downloadToHomeHits}"
                                            class="btn btn-link ms-5 d-block"
                                            title="#{msgs.gesamtesTrefferset}"
                                            onclick="if (!confirm('#{msgs.download}')) return false"
                                            jsf:id="downloadToHomeAll">
                                            <span class="btn btn-blank">
                                                <span class="fa fa-angle-right" />
                                            </span>
                                            <span>
                                                <h:outputText value="#{msgs.gesamtesTrefferset}" />
                                            </span>
                                        </button>
                                    </div>
                                </h:panelGroup>
                                <!-- // LINK PROCESSES OUT OF HOME DIRECTORY -->

                            </h:panelGroup>
                            <!-- // LINK PROCESSES INTO OR OUT OF HOME DIRECTORY -->

                            <!-- MASS EXPORT -->
                            <h:panelGroup
                                styleClass="mb-2"
                                layout="block"
                                rendered="#{LoginForm.hasRole('Workflow_Processes_Allow_Export') and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">

                                <button
                                    type="button"
                                    class="btn btn-link"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#possibleActions2"
                                    aria-expanded="false"
                                    aria-controls="possibleActions2">
                                    <span class="btn btn-blank btn-link">
                                        <span class="fa fa-globe" />
                                    </span>
                                    <span>
                                        <h:outputText value="#{msgs.metadatenFuerDMSExportieren}" />
                                    </span>
                                </button>

                                <div
                                    id="possibleActions2"
                                    class="collapse">

                                    <!-- TODO: delete this warning once the root cause of the timeout problem is solved  -->
                                    <div class="alert alert-warning mt-4">#{msgs.timeoutWarningDMS}</div>
                                    <!-- Download-Schaltknopf für Selection-->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action6"
                                        jsf:action="#{ProzessverwaltungForm.exportDMSSelection}"
                                        jsf:rendered="#{ProzessverwaltungForm.anzeigeAnpassen['selectionBoxes']}"
                                        title="#{msgs.auswahl2}"
                                        onclick="if (!confirm('#{msgs.process_sureToDoMassExport}')) return false">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.auswahl2}" />
                                        </span>
                                    </button>
                                    <!-- Download-Schaltknopf für Page-->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:action="#{ProzessverwaltungForm.exportDMSPage}"
                                        title="#{msgs.trefferDieserSeite}"
                                        jsf:id="action7"
                                        onclick="if (!confirm('#{msgs.process_sureToDoMassExport}')) return false">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.trefferDieserSeite}" />
                                        </span>
                                    </button>
                                    <!-- Download-Schaltknopf für gesamtes Trefferset -->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:action="#{ProzessverwaltungForm.exportDMSHits}"
                                        title="#{msgs.gesamtesTrefferset}"
                                        jsf:id="action8"
                                        onclick="if (!confirm('#{msgs.process_sureToDoMassExport}')) return false">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.gesamtesTrefferset}" />
                                        </span>
                                    </button>

                                </div>
                            </h:panelGroup>
                            <!-- // MASS EXPORT -->

                            <!-- GOOBI SCRIPT -->
                            <h:panelGroup
                                layout="block"
                                styleClass="mb-2"
                                rendered="#{LoginForm.hasAnyGoobiScriptRole and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                <div
                                    jsf:id="goobiScriptMessages"
                                    class="">
                                    <h:messages
                                        for="goobiScriptfield"
                                        escape="false"
                                        errorClass="alert alert-danger mb-0"
                                        infoClass="alert alert-info mb-0"
                                        warnClass="alert mb-0"
                                        showDetail="true"
                                        showSummary="true"
                                        tooltip="true"
                                        styleClass="messages mb-2" />
                                    <h:messages
                                        for="goobiScriptPopup"
                                        escape="false"
                                        errorClass="alert alert-danger mb-0"
                                        infoClass="alert alert-info mb-0"
                                        warnClass="alert"
                                        styleClass="messages mb-2" />
                                </div>
                                <button
                                    jsf:id="expandbutton5"
                                    type="button"
                                    class="btn btn-link"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#possibleActions5"
                                    aria-expanded="false"
                                    aria-controls="possibleActions5"
                                    onclick="handleGoobiScriptCodeEditor()">
                                    <span class="btn btn-blank">
                                        <span class="fa fa-cogs" />
                                    </span>
                                    <span>
                                        <h:outputText value="#{msgs.goobiScriptAusfuehren}" />
                                    </span>
                                    <f:setPropertyActionListener
                                        value="#{NavigationForm.uiStatus.goobiScript eq 'true' ? 'false' : 'true'}"
                                        target="#{NavigationForm.uiStatus.goobiScript}" />
                                </button>
                                <div
                                    id="possibleActions5"
                                    class="collapse ms-5 mt-3">

                                    <div class="list-of-goobi-scripts mb-2">
                                        <!-- iterate through all existing GoobiScripts -->
                                        <ui:repeat
                                            var="gs"
                                            value="#{ProzessverwaltungForm.allGoobiScripts}">
                                            <ui:fragment rendered="#{LoginForm.hasRole('Workflow_Processes_Allow_GoobiScript') or LoginForm.hasRole('goobiscript_'.concat(gs.one))}">
                                                <span
                                                    class="badge badge-intranda-light"
                                                    onclick="goobiScriptCodeMirror.doc.setValue('#{gs.two}')"> #{gs.one} </span>
                                            </ui:fragment>
                                        </ui:repeat>
                                        <ui:repeat
                                            var="template"
                                            value="#{ProzessverwaltungForm.goobiScriptTemplates}">
                                            <ui:fragment rendered="#{LoginForm.hasRole('Workflow_Processes_Allow_GoobiScript') or LoginForm.hasRole('goobiscript_'.concat(template.title))}">
                                                <span
                                                    class="badge badge-intranda-blue"
                                                    data-toggle="tooltip"
                                                    data-bs-original-title="#{template.description}"
                                                    onclick="goobiScriptCodeMirror.doc.setValue('#{template.escapedScripts}')"> #{template.title} </span>
                                            </ui:fragment>
                                        </ui:repeat>
                                    </div>
                                    <div class="mb-2">
                                        <h:inputTextarea
                                            id="goobiScriptfield"
                                            pt:aria-label="goobiScriptfield"
                                            forceId="true"
                                            styleClass="form-control"
                                            value="#{ProzessverwaltungForm.goobiScript}" />
                                    </div>

                                    <!-- GoobiScript für selektierte Treffer der Seite -->
                                    <ui:fragment rendered="#{ProzessverwaltungForm.anzeigeAnpassen['selectionBoxes']}">
                                        <!-- GoobiScript für selektierte Treffer der Seite - modal rendern  -->
                                        <script>

                                                                                                                                                                </script>
                                        <button
                                            jsf:id="selectedModalRender"
                                            class="btn btn-link d-block"
                                            jsf:action="#{ProzessverwaltungForm.prepareGoobiScriptSelection}"
                                            pt:data-modalid="goobiScriptModal">
                                            <f:ajax
                                                render="goobiScriptModalWrapper boxProcessesAllActions:goobiScriptMessages"
                                                execute="goobiScriptfield"
                                                onevent="(data) => showGoobiScriptModal({data, modalID: 'boxProcessesAllActions\:goobiScriptModal'})" />
                                            <span class="btn btn-blank">
                                                <span class="fa fa-angle-right" />
                                            </span>
                                            <span>
                                                <h:outputText value="#{msgs.auswahl2}" />
                                            </span>
                                        </button>
                                    </ui:fragment>
                                    <!-- GoobiScript für Treffer der Seite - modal rendern  -->
                                    <button
                                        jsf:id="resultsModalRender"
                                        type="button"
                                        class="btn btn-link d-block"
                                        jsf:action="#{ProzessverwaltungForm.prepareGoobiScriptPage}"
                                        pt:data-modalid="goobiScriptModal">
                                        <f:ajax
                                            render="goobiScriptModalWrapper boxProcessesAllActions:goobiScriptMessages"
                                            execute="goobiScriptfield"
                                            onevent="(data) => showGoobiScriptModal({data, modalID: 'boxProcessesAllActions\:goobiScriptModal'})" />
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.trefferDieserSeite}" />
                                        </span>
                                    </button>
                                    <!-- GoobiScript für alle Treffer - modal rendern  -->
                                    <button
                                        type="button"
                                        jsf:id="allModalRender"
                                        class="btn btn-link d-block"
                                        jsf:action="#{ProzessverwaltungForm.prepareGoobiScriptHits}"
                                        pt:data-modalid="goobiScriptModal">
                                        <f:ajax
                                            render="goobiScriptModalWrapper boxProcessesAllActions:goobiScriptMessages"
                                            execute="goobiScriptfield"
                                            onevent="(data) => showGoobiScriptModal({data, modalID: 'boxProcessesAllActions\:goobiScriptModal'})" />
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.gesamtesTrefferset}" />
                                        </span>
                                    </button>

                                </div>
                            </h:panelGroup>
                            <!-- // GOOBI SCRIPT -->

                            <!-- SAVE SEARCH RESULT -->
                            <h:panelGroup
                                layout="block"
                                styleClass="mb-2"
                                rendered="#{LoginForm.hasRole('Workflow_Processes_Allow_Download') and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                <button
                                    type="button"
                                    jsf:id="expandbutton10"
                                    class="btn btn-link">
                                    <span class="btn btn-blank">
                                        <span class="fa fa-floppy-o" />
                                    </span>
                                    <span>
                                        <h:outputText value="#{msgs.saveSearchResult}" />
                                    </span>
                                    <f:setPropertyActionListener
                                        target="#{ProzessverwaltungForm.dispaySearchResult}"
                                        value="#{not ProzessverwaltungForm.dispaySearchResult}" />
                                    <f:ajax render="@form" />
                                </button>
                                <h:panelGroup
                                    layout="block"
                                    id="possibleActions10"
                                    styleClass="ms-5 mt-2"
                                    rendered="#{ProzessverwaltungForm.dispaySearchResult}">
                                    <h:dataTable
                                        value="#{ProzessverwaltungForm.searchField}"
                                        var="field"
                                        rowIndexVar="id"
                                        styleClass="no-borders">
                                        <h:column>
                                            <h:outputText value="#{msgs.column} #{id +1}:" />
                                        </h:column>
                                        <h:column>
                                            <h:selectOneMenu
                                                pt:aria-label="#{msgs.auswahl2}"
                                                value="#{field.value}"
                                                styleClass="form-select">
                                                <f:selectItems
                                                    value="#{ProzessverwaltungForm.possibleItems}"
                                                    var="item"
                                                    itemDisabled="#{item.disabled}"
                                                    itemLabel="#{item.label}"
                                                    itemValue="#{item.value}"
                                                    styleClass="me-2" />
                                            </h:selectOneMenu>
                                        </h:column>
                                        <h:column>
                                            <button
                                                jsf:id="addFilter"
                                                class="btn btn-blank ms-2 me-2"
                                                aria-label="#{msgs.addFilter}"
                                                jsf:action="#{ProzessverwaltungForm.addField}">
                                                <span class="fa fa-plus" />
                                                <f:ajax
                                                    render="@form"
                                                    execute="@form" />
                                            </button>
                                            <button
                                                jsf:id="removeFilter"
                                                class="btn btn-blank"
                                                aria-label="#{msgs.removeFilter}"
                                                jsf:action="#{ProzessverwaltungForm.deleteField}"
                                                jsf:rendered="#{ProzessverwaltungForm.sizeOfFieldList > 1}">
                                                <span class="fa fa-minus" />
                                                <f:setPropertyActionListener
                                                    target="#{ProzessverwaltungForm.currentField}"
                                                    value="#{field}" />
                                                <f:ajax
                                                    render="@form"
                                                    execute="@form" />
                                            </button>
                                        </h:column>
                                    </h:dataTable>
                                    <button
                                        class="btn btn-link d-block"
                                        jsf:action="#{ProzessverwaltungForm.generateResultXls}"
                                        title="#{msgs.createExcel}"
                                        jsf:rendered="#{ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.createExcel}" />
                                        </span>
                                    </button>
                                    <button
                                        class="btn btn-link d-block"
                                        jsf:action="#{ProzessverwaltungForm.generateResultDoc}"
                                        title="#{msgs.createDoc}"
                                        jsf:rendered="#{ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.createDoc}" />
                                        </span>
                                    </button>
                                    <button
                                        class="btn btn-link d-block"
                                        jsf:action="#{ProzessverwaltungForm.generateResultRtf}"
                                        title="#{msgs.createRtf}"
                                        jsf:rendered="#{ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.createRtf}" />
                                        </span>
                                    </button>
                                    <button
                                        class="btn btn-link d-block"
                                        jsf:action="#{ProzessverwaltungForm.generateResultAsPdf}"
                                        title="#{msgs.createPdf}"
                                        jsf:rendered="#{ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.createPdf}" />
                                        </span>
                                    </button>
                                </h:panelGroup>
                            </h:panelGroup>
                            <!-- // SAVE SEARCH RESULT -->

                            <!-- IMAGE NUMBERS -->
                            <h:panelGroup
                                layout="block"
                                styleClass="mb-2"
                                rendered="#{LoginForm.hasRole('Statistics_General') and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">

                                <button
                                    type="button"
                                    jsf:id="expandbutton6"
                                    class="btn btn-link"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#possibleActions6">
                                    <span class="btn btn-blank">
                                        <span class="fa fa-table" />
                                    </span>
                                    <span>
                                        <h:outputText value="#{msgs.anzahlMetadatenUndImagesErmitteln}" />
                                    </span>
                                </button>
                                <div
                                    id="possibleActions6"
                                    class="collapse">
                                    <!-- Statistische Auswertung-Schaltknopf für Page-->
                                    <button
                                        jsf:id="action20"
                                        class="btn btn-link ms-5 d-block"
                                        jsf:action="#{ProzessverwaltungForm.calcMetadataAndImagesSelection}"
                                        jsf:rendered="#{ProzessverwaltungForm.anzeigeAnpassen['selectionBoxes']}"
                                        title="#{msgs.auswahl2}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.auswahl2}" />
                                        </span>
                                    </button>
                                    <!-- Statistische Auswertung-Schaltknopf für Page-->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action21"
                                        jsf:action="#{ProzessverwaltungForm.calcMetadataAndImagesPage}"
                                        title="#{msgs.trefferDieserSeite}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.trefferDieserSeite}" />
                                        </span>
                                    </button>
                                    <!-- Statistische Auswertung-Schaltknopf für gesamtes Trefferset -->
                                    <button
                                        class="btn btn-link ms-5 d-block "
                                        jsf:id="action22"
                                        jsf:action="#{ProzessverwaltungForm.calcMetadataAndImagesHits}"
                                        title="#{msgs.gesamtesTrefferset}"
                                        onclick="if (!confirm('#{msgs.wirklichAusfuehren}')) return false">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.gesamtesTrefferset}" />
                                        </span>
                                    </button>
                                </div>
                            </h:panelGroup>
                            <!-- // IMAGE NUMBERS -->

                            <!-- STATISTICS -->
                            <h:panelGroup rendered="#{LoginForm.hasRole('Statistics_General') and ProzessverwaltungForm.modusAnzeige=='aktuell' and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                <button
                                    type="button"
                                    jsf:id="expandbutton7"
                                    class="btn btn-link"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#possibleActions7">
                                    <span class="btn btn-blank">
                                        <span class="fa fa-bar-chart-o" />
                                    </span>
                                    <span>
                                        <h:outputText value="#{msgs.statistischeAuswertung}" />
                                    </span>
                                </button>
                                <div
                                    id="possibleActions7"
                                    class="collapse">
                                    <!-- StatisticsStatusVolumes-->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action30"
                                        jsf:rendered="#{!HelperForm.anonymized}"
                                        jsf:action="#{ProzessverwaltungForm.statisticsStatusVolumes}"
                                        title="#{msgs.statusOfVolumes}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.statusOfVolumes}" />
                                        </span>
                                        <f:setPropertyActionListener
                                            target="#{ProzessverwaltungForm.showStatistics}"
                                            value="true" />
                                    </button>
                                    <!-- StatisticsUsergroups -->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action31"
                                        jsf:rendered="#{!HelperForm.anonymized}"
                                        jsf:action="#{ProzessverwaltungForm.statisticsUsergroups}"
                                        title="#{msgs.statusForUsers}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.statusForUsers}" />
                                        </span>
                                        <f:setPropertyActionListener
                                            target="#{ProzessverwaltungForm.showStatistics}"
                                            value="true" />
                                    </button>
                                    <!-- StatisticsRuntimeSteps -->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action32"
                                        jsf:rendered="#{!HelperForm.anonymized and ProzessverwaltungForm.paginator.totalResults lt 300}"
                                        jsf:action="#{ProzessverwaltungForm.statisticsRuntimeSteps}"
                                        title="#{msgs.runtimeOfSteps}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.runtimeOfSteps}" />
                                        </span>
                                        <f:setPropertyActionListener
                                            target="#{ProzessverwaltungForm.showStatistics}"
                                            value="true" />
                                    </button>
                                    <!-- StatisticsProduction -->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action33"
                                        jsf:rendered="#{!HelperForm.anonymized}"
                                        jsf:action="#{ProzessverwaltungForm.statisticsProduction}"
                                        title="#{msgs.productionStatistics}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.productionStatistics}" />
                                        </span>
                                        <f:setPropertyActionListener
                                            target="#{ProzessverwaltungForm.showStatistics}"
                                            value="true" />
                                    </button>
                                    <!-- StatisticsTroughput -->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action34"
                                        jsf:rendered="#{!HelperForm.anonymized}"
                                        jsf:action="#{ProzessverwaltungForm.statisticsTroughput}"
                                        title="#{msgs.productionThroughput}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.productionThroughput}" />
                                        </span>
                                        <f:setPropertyActionListener
                                            target="#{ProzessverwaltungForm.showStatistics}"
                                            value="true" />
                                    </button>
                                    <!-- StatisticsStorage -->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action35"
                                        jsf:action="#{ProzessverwaltungForm.statisticsStorage}"
                                        title="#{msgs.storageCalculator}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.storageCalculator}" />
                                        </span>
                                        <f:setPropertyActionListener
                                            target="#{ProzessverwaltungForm.showStatistics}"
                                            value="true" />
                                    </button>
                                    <!-- StatisticsCorrection -->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action36"
                                        jsf:rendered="#{!HelperForm.anonymized}"
                                        jsf:action="#{ProzessverwaltungForm.statisticsCorrection}"
                                        title="#{msgs.errorTracking}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.errorTracking}" />
                                        </span>
                                        <f:setPropertyActionListener
                                            target="#{ProzessverwaltungForm.showStatistics}"
                                            value="true" />
                                    </button>
                                    <!-- ProjectAssociationss -->
                                    <button
                                        class="btn btn-link ms-5 d-block"
                                        jsf:id="action37"
                                        jsf:action="#{ProzessverwaltungForm.statisticsProject}"
                                        title="#{msgs.projectAssociation}">
                                        <span class="btn btn-blank">
                                            <span class="fa fa-angle-right" />
                                        </span>
                                        <span>
                                            <h:outputText value="#{msgs.projectAssociation}" />
                                        </span>
                                        <f:setPropertyActionListener
                                            target="#{ProzessverwaltungForm.showStatistics}"
                                            value="true" />
                                    </button>
                                </div>
                            </h:panelGroup>
                            <!-- // STATISTICS -->

                            <!-- GOOBI SCRIPT MODAL -->
                            <h:panelGroup
                                id="goobiScriptModalWrapper"
                                prependId="false"
                                rendered="#{LoginForm.hasAnyGoobiScriptRole and ProzessverwaltungForm.modusAnzeige=='aktuell'  and ProzessverwaltungForm.paginator.totalResults > 0 }">
                                <h:panelGroup
                                    styleClass="modal fade"
                                    layout="block"
                                    id="goobiScriptModal"
                                    tabindex="-1"
                                    role="dialog"
                                    aria-labelledby="myModalLabel"
                                    rendered="#{ProzessverwaltungForm.parsedGoobiScripts != null}">

                                    <div
                                        class="modal-dialog"
                                        role="document">
                                        <div class="modal-content">
                                            <div class="modal-header bg-primary-400 text-white">
                                                <h4
                                                    class="modal-title"
                                                    id="myModalLabel">
                                                    <h:outputText value="GoobiScript" />
                                                </h4>
                                                <button
                                                    type="button"
                                                    class="btn text-white ms-auto"
                                                    title="#{msgs.cancel}"
                                                    data-bs-dismiss="modal">
                                                    <span class="fa fa-times" />
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="text-center form-control">
                                                    <img
                                                        class="goobiScript-image"
                                                        src="#{ProzessverwaltungForm.goobiScriptHitsImage}" />
                                                </div>
                                                <br />
                                                <p>#{msgs.youWantToExecuteGoobiScript}</p>
                                                <pre class="goobiScript-source">#{ProzessverwaltungForm.goobiScript}</pre>
                                                <br />
                                                <p>#{msgs.pleaseEnterNumberOfProcesses}</p>
                                                <h:inputText
                                                    id="goobiScriptPopup"
                                                    styleClass="form-control"
                                                    value="#{ProzessverwaltungForm.goobiScriptHitsCountUser}"
                                                    validatorMessage="#{msgs.GoobiScript_input_not_valid}"
                                                    onkeydown="clickOnEnter(event)"
                                                    pt:data-onenterbutton="goobiScriptConfirmButton">
                                                </h:inputText>
                                            </div>
                                            <div class="modal-footer">
                                                <button
                                                    type="button"
                                                    jsf:id="goobiScriptCancelButton"
                                                    title="#{msgs.goobiScriptAusfuehren}"
                                                    jsf:rel="tooltip"
                                                    class="btn btn-blank"
                                                    data-bs-dismiss="modal">
                                                    <h:outputText value="#{msgs.cancel} " />
                                                </button>
                                                <button
                                                    jsf:action="#{ProzessverwaltungForm.runGoobiScript}"
                                                    jsf:id="goobiScriptConfirmButton"
                                                    title="#{msgs.goobiScriptAusfuehren}"
                                                    jsf:rel="tooltip"
                                                    class="btn btn-hot"
                                                    onclick="preventDoubleSubmit(this);">
                                                    <span class="fa fa-cogs" />
                                                    <span>
                                                        <h:outputText value="#{msgs.goobiScriptAusfuehren} " />
                                                    </span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </h:panelGroup>

                            </h:panelGroup>
                            <!-- // GOOBI SCRIPT MODAL -->

                        </h:form>

                    </intranda:box>

                </div>
            </div>
        </ui:fragment>

    </composite:implementation>

</ui:composition>
