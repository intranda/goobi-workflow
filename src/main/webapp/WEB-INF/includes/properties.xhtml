<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:jsf="http://xmlns.jcp.org/jsf">
    <!-- TABLE OF EXISTING PROPERTIES -->
    <table
        class="table table-hover table-bordered"
        id="propertyTable">

        <!-- LIST OF CONTAINERS -->
        <x:dataList
            var="container"
            value="#{ProzessverwaltungForm.containerList}"
            id="container"
            rowCountVar="rowCount"
            rowIndexVar="rowIndex">

            <!-- LIST OF PROPERTIES IN CONTAINER 0 -->
            <x:dataList
                var="proc"
                value="#{ProzessverwaltungForm.containerlessProperties}"
                id="containerless"
                rowCountVar="propCount"
                rowIndexVar="propInd">
                <h:panelGroup rendered="#{container == '0'}">
                    <tr>
                        <th scope="row" class="process_propertyName">
                            <span
                                title="&quot;{process.#{proc.name}}&quot;"
                                data-bs-toggle="tooltip"
                                rel="tooltip">#{proc.name}</span>
                        </th>
                        <td class="process_propertyValue">
                            <div class="w-100 d-flex justify-content-between">
                                <x:dataList
                                    var="val"
                                    value="#{proc.valueList}"
                                    rendered="#{proc.type.name == 'listmultiselect'}">
                                    <h:outputText
                                        value="#{val}"
                                        styleClass="badge badge-no-radius badge-light-grey" />
                                </x:dataList>
                                <h:outputText
                                    value="#{proc.readValue}"
                                    rendered="#{proc.type.name == 'html'}"
                                    escape="false" />
                                <h:outputText
                                    value="#{proc.readValue}"
                                    rendered="#{proc.type.name != 'link' and proc.type.name != 'boolean' and proc.type.name != 'html' and proc.type.name != 'listmultiselect'}" />
                                <h:outputLink
                                    pt:aria-label="#{proc.name}"
                                    value="#{proc.readValue}"
                                    title="#{proc.readValue}"
                                    target="_blank"
                                    rendered="#{proc.type.name == 'link'}">
                                    <h:outputText value="#{proc.readValue}" />
                                    <f:passThroughAttribute
                                        name="data-toggle"
                                        value="tooltip" />
                                </h:outputLink>
                                <h:panelGroup rendered="#{proc.type.name == 'boolean'}">
                                    <h:panelGroup rendered="#{proc.readValue eq 'true'}">
                                        <span class="fa fa-check-square-o fa-lg" />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{proc.readValue ne 'true'}">
                                        <span class="fa fa-square-o fa-lg" />
                                    </h:panelGroup>
                                </h:panelGroup>
                                <c:if test="#{LoginForm.hasRole('Workflow_General_Details_Edit')}">
                                    <div>
                                        <button
                                            class="btn btn-blank"
                                            jsf:action="process_edit"
                                            title="#{msgs.bearbeiten}"
                                            jsf:id="editProperty"
                                            aria-label="#{msgs.bearbeiten}"
                                            jsf:rendered="#{proc.type.name != 'metadata'}"
                                            data-bs-toggle="tooltip">
                                            <span
                                                aria-hidden="true"
                                                class="fa fa-pencil" />
                                            <x:updateActionListener
                                                property="#{ProzessverwaltungForm.processProperty}"
                                                value="#{proc}" />
                                            <x:updateActionListener
                                                property="#{ProzessverwaltungForm.container}"
                                                value="0" />
                                            <x:updateActionListener
                                                property="#{ProzessverwaltungForm.modusBearbeiten}"
                                                value="eigenschaft" />
                                        </button>
                                        <button
                                            jsf:action="#{ProzessverwaltungForm.duplicateProperty}"
                                            class="btn btn-blank ms-2"
                                            title="#{msgs.duplicate}"
                                            jsf:id="duplicateProperty"
                                            jsf:rendered="#{proc.type.name != 'metadata'}"
                                            data-bs-toggle="tooltip">
                                            <span
                                                aria-hidden="true"
                                                class="fa fa-clipboard" />
                                            <x:updateActionListener
                                                property="#{ProzessverwaltungForm.processProperty}"
                                                value="#{proc}" />
                                            <x:updateActionListener
                                                property="#{ProzessverwaltungForm.container}"
                                                value="0" />
                                        </button>
                                    </div>
                                </c:if>
                            </div>
                        </td>
                    </tr>
                </h:panelGroup>
            </x:dataList>
            <!-- // LIST OF PROPERTIES IN CONTAINER 0 -->

            <!-- BLANK TABLE ROW -->
            <h:panelGroup rendered="#{container != '0'}">
                <tr>
                    <th colspan="3">
                        <div class="w-100 d-flex justify-content-between">
                            <h:outputText
                                value="#{msgs[container]}"
                                escape="false"
                                styleClass="h6 m-0" />
                                <!-- edit container -->
                            <div>
                                <button
                                    class="btn btn-blank"
                                    jsf:action="process_edit"
                                    jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit') and process_item.type.name != 'metadata'}"
                                    title="#{msgs.bearbeiten}"
                                    jsf:id="editProperty2"
                                    data-bs-toggle="tooltip">
                                    <span
                                        aria-hidden="true"
                                        class="fa fa-pencil" />
                                    <x:updateActionListener
                                        property="#{ProzessverwaltungForm.container}"
                                        value="#{container}" />
                                    <x:updateActionListener
                                        property="#{ProzessverwaltungForm.modusBearbeiten}"
                                        value="eigenschaft" />
                                </button>
                                <!-- duplicate container -->
                                <button
                                    class="btn btn-blank ms-2"
                                    jsf:id="duplicateProperty2"
                                    aria-label="#{msgs.duplicate}"
                                    jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit') and process_item.type.name != 'metadata'}"
                                    jsf:action="#{ProzessverwaltungForm.duplicateContainer}"
                                    title="#{msgs.duplicate}"
                                    data-bs-toggle="tooltip">
                                    <span
                                        aria-hidden="true"
                                        class="fa fa-clipboard" />
                                    <x:updateActionListener
                                        property="#{ProzessverwaltungForm.container}"
                                        value="#{container}" />
                                </button>
                            </div>
                        </div>
                    </th>
                </tr>
            </h:panelGroup>
            <!-- // BLANK TABLE ROW -->

            <!-- LIST OF PROPERTIES IN CONTAINER NOT 0 -->
            <x:dataList
                var="process_item"
                id="container"
                value="#{ProzessverwaltungForm.containers[container].propertyList}"
                rowCountVar="propCount"
                rowIndexVar="propInd">
                    <tr>
                        <th scope="row" class="process_propertyName">
                            <span
                                title="{process.#{process_item.name}}"
                                data-bs-toggle="tooltip">
                                #{process_item.name}
                            </span>
                        </th>
                        <td class="process_propertyValue">
                            <x:dataList
                                var="val"
                                value="#{process_item.valueList}"
                                rendered="#{process_item.type.name == 'listmultiselect'}">
                                <h:outputText
                                    value="#{val}"
                                    styleClass="badge badge-no-radius badge-light-grey" />
                            </x:dataList>
                            <h:outputText
                                value="#{process_item.readValue}"
                                rendered="#{process_item.type.name == 'html'}"
                                escape="false" />
                            <h:outputText
                                value="#{process_item.readValue}"
                                rendered="#{process_item.type.name != 'link' and process_item.type.name != 'boolean' and process_item.type.name != 'html' and process_item.type.name != 'listmultiselect'}" />
                            <h:outputLink
                                pt:aria-label="#{process_item.name}"
                                value="#{process_item.readValue}"
                                title="#{process_item.readValue}"
                                target="_blank"
                                rendered="#{process_item.type.name == 'link'}">
                                <h:outputText value="#{process_item.readValue}" />
                                <f:passThroughAttribute
                                    name="data-toggle"
                                    value="tooltip" />
                            </h:outputLink>
                            <h:panelGroup rendered="#{process_item.type.name == 'boolean'}">
                                <h:panelGroup rendered="#{process_item.readValue eq 'true'}">
                                    <span class="fa fa-check-square-o fa-lg" />
                                </h:panelGroup>
                                <h:panelGroup rendered="#{process_item.readValue ne 'true'}">
                                    <span class="fa fa-square-o fa-lg" />
                                </h:panelGroup>
                            </h:panelGroup>
                        </td>
                    </tr>
            </x:dataList>
            <!-- // LIST OF PROPERTIES IN CONTAINER NOT 0 -->

        </x:dataList>
    </table>
    <!-- // TABLE OF EXISTING PROPERTIES -->
</ui:composition>