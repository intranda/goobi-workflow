<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:composite="http://xmlns.jcp.org/jsf/composite"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:x="http://myfaces.apache.org/tomahawk"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:jsf="http://xmlns.jcp.org/jsf">

    <composite:interface>
    </composite:interface>

    <composite:implementation>

        <!-- ===================== GROSSE SCHRITT BOX IM GELADENEN PROZESS ====================== -->

        <style>
#changeTemplate {
    color: #fff;
}

#changeTemplate:hover {
    background: #fff;
    color: #368ee0;
}
</style>

<script type="text/javascript">
        	function switchExpanded(id){
        		console.log("called by: "+id);
				var x = document.getElementById(id).getAttribute("aria-expanded");
				console.log(x)
				if (x == "true"){
					x = "false"
				} else {
					x = "true"
				}
				document.getElementById(id).setAttribute("aria-expanded", x);
        	}
        </script>

        <div class="row">
            <div class="col-sm-12">

                <div class="box box-color box-bordered">
                    <div class="box-title">
                        <h3>
                            <span class="fa fa-list" />
                            <h:outputText value="#{msgs.arbeitsschritte}" />
                        </h3>

                        <div class="actions">
                            <h:panelGroup rendered="#{ProzessverwaltungForm.modusAnzeige!='vorlagen' and LoginForm.hasRole('Workflow_Processes_Allow_Template_Change')}">
                                <div
                                    title="#{msgs.process_changeTemplate}"
                                    class="btn-group"
                                    data-toggle="tooltip">
                                    <div class="dropdown">
                                    <button
                                        id="changeTemplate"
                                        class="btn btn-mini dropdown-toggle focusable"
                                        aria-label="#{msgs.process_changeTemplate}"
                                        aria-haspopup="true"
                                        aria-expanded="false"
                                        onclick="switchExpanded(this.id)"
                                        data-toggle="dropdown"> <span class="fa fa-exchange margin-right-5" /> <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu pull-right">
                                        <ui:repeat
                                            var="template"
                                            value="#{ProzessverwaltungForm.availableProcessTemplates}">
                                            <li><button
                                            		jsf:id="changeTemplate"
                                                    jsf:action="#{ProzessverwaltungForm.changeTemplate}"
                                                    title="#{msgs.process_changeTemplate}"
                                                    aria-label="#{msgs.process_changeTemplate}"
                                                    class="dropdown-item">
                                                    <h:outputText value="#{template.titel}" />
                                                    <x:updateActionListener
                                                        property="#{ProzessverwaltungForm.template}"
                                                        value="#{template}" />
                                                    <x:updateActionListener
                                                        property="#{ProzessverwaltungForm.processToChange}"
                                                        value="#{ProzessverwaltungForm.myProzess}" />
                                                    <f:passThroughAttribute
                                                        name="data-toggle"
                                                        value="tooltip" />
                                                </button></li>
                                        </ui:repeat>
                                    </ul>
                                    </div>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                    <div class="box-content nopadding">

                        <div class="dataTables_wrapper">

                            <x:dataTable
                                styleClass="table table-hover table-nomargin dataTable table-bordered responsive"
                                id="steps"
                                width="100%"
                                cellspacing="1px"
                                var="item"
                                value="#{ProzessverwaltungForm.myProzess.schritteList}">

                                <!-- ===================== Order ====================== -->
                                <x:column
                                    id="ordercolumn"
                                    style="min-width:80px;">
                                    <f:facet name="header">
                                        <h:outputText value="#{msgs.nr}" />
                                    </f:facet>
                                    <h:outputText
                                        value="#{item.reihenfolge}"
                                        styleClass="#{item.bearbeitungsstatusEnum == 'DEACTIVATED'?'font-light':''}" />
                                    <!-- Button: count order number 1 down -->
                                    <button
                                        jsf:id="down"
                                        jsf:action="#{ProzessverwaltungForm.decrementOrder}"
                                        title="#{msgs.process_countTaskOrderNumberDown}"
                                        aria-label="#{msgs.process_countTaskOrderNumberDown}"
                                        jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit')}"
                                        class="margin-left-10 button-link">
                                        <span class="fa fa-minus-circle font-light" />
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchritt}"
                                            value="#{item}" />
                                        <f:ajax render="@form" />
                                    </button>
                                    <!-- Button: count order number 1 up -->
                                    <button
                                        jsf:id="up"
                                        jsf:action="#{ProzessverwaltungForm.incrementOrder}"
                                        title="#{msgs.process_countTaskOrderNumberUp}"
                                        aria-label="#{msgs.process_countTaskOrderNumberUp}"
                                        class="button-link margin-left-2"
                                        jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit')}">
                                        <span class="fa fa-plus-circle font-light" />
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchritt}"
                                            value="#{item}" />
                                        <f:ajax render="@form" />
                                    </button>
									<!-- Button: reorder step - move down -->
                                    <button
                                        jsf:id="down_exchange"
                                        jsf:action="#{ProzessverwaltungForm.exchangeTaskOrderDownwards}"
                                        title="#{msgs.process_moveTaskUp}"
                                        aria-label="#{msgs.process_moveTaskUp}"
                                        jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit')}"
                                        class="button-link margin-left-10">
                                        <span class="fa fa-chevron-up font-light" />
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchritt}"
                                            value="#{item}" />
                                        <f:ajax render="@form" />
                                    </button>
									<!-- Button: reorder step - move up -->
                                    <button
                                        jsf:id="up_exchange"
                                        jsf:action="#{ProzessverwaltungForm.exchangeTaskOrderUpwards}"
                                        title="#{msgs.process_moveTaskDown}"
                                        aria-label="#{msgs.process_moveTaskDown}"
                                        class="button-link"
                                        jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit')}">
                                        <span class="fa fa-chevron-down font-light" />
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchritt}"
                                            value="#{item}" />
                                        <f:ajax render="@form" />
                                    </button>
                                </x:column>
                                <!-- ===================== // Reihenfolge ====================== -->

                                <!-- +++++++++++++++++  alle Eigenschaften auflisten - mit CSS ++++++++++++++++++++++++ -->
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{msgs.titel}" />
                                    </f:facet>

                                    <h:panelGroup id="possibleActions1">

                                        <button
                                            jsf:id="expandbutton1"
                                            class="font-black button-link">
                                            <h:panelGroup rendered="#{!item.panelAusgeklappt}">
                                                <span class="fa fa-angle-right margin-right-5 #{item.bearbeitungsstatusEnum == 'DEACTIVATED'?'font-light':''}" />
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{item.panelAusgeklappt}">
                                                <span class="fa fa-angle-down margin-right-5 #{item.bearbeitungsstatusEnum == 'DEACTIVATED'?'font-light':''}" />
                                            </h:panelGroup>
                                            <x:updateActionListener
                                                value="#{item.panelAusgeklappt?false:true}"
                                                property="#{item.panelAusgeklappt}" />
                                            <f:ajax render="possibleActions1" />
                                            <h:panelGroup rendered="#{item.typAutomatisch}">
                                                <i
                                                    class="fa fa-cogs font-light margin-right-10"
                                                    title="#{msgs.automatischerSchritt}"
                                                    data-toggle="tooltip"></i>
                                            </h:panelGroup>
                                            <h:panelGroup rendered="#{not item.typAutomatisch}">
                                                <i
                                                    class="fa fa-user-o font-light margin-right-10"
                                                    title="#{msgs.normalerSchritt}"
                                                    data-toggle="tooltip"></i>
                                            </h:panelGroup>
                                            <h:outputText
                                                value="#{item.titelLokalisiert}"
                                                styleClass="#{item.bearbeitungsstatusEnum == 'DEACTIVATED'?'font-light':''}" />
                                        </button>

                                        <h:panelGroup
                                            styleClass="margin-top-10 block"
                                            rendered="#{item.panelAusgeklappt}">

                                            <div class="box box-small box-color box-bordered">
                                                <div class="box-title">
                                                    <h3>
                                                        <span class="fa fa-table" />
                                                        #{msgs.eigenschaften}
                                                    </h3>
                                                </div>
                                                <div class="box-content nopadding">

                                                    <h:panelGrid
                                                        columns="2"
                                                        columnClasses="tableColumnWidthLong"
                                                        class="table table-hover table-bordered #{item.bearbeitungsstatusEnum == 'DEACTIVATED'?'font-light':''}">

                                                        <h:outputText value="#{msgs.titel}:" />
                                                        <h:outputText value="#{item.titelLokalisiert}" />
                                                        <h:outputText value="#{msgs.prioritaet}:" />
                                                        <h:panelGroup>
                                                            <h:panelGroup rendered="#{item.prioritaet == 0}">
                                                                <span class="badge badge-intranda-light"> #{msgs.badgePriority0} </span>
                                                            </h:panelGroup>

                                                            <h:panelGroup rendered="#{item.prioritaet == 1}">
                                                                <span class="badge badge-intranda-orange">
                                                                    <span class="fa fa-lightbulb-o" />
                                                                    #{msgs.badgePriority1}
                                                                </span>
                                                            </h:panelGroup>

                                                            <h:panelGroup rendered="#{item.prioritaet == 2}">
                                                                <span class="badge badge-intranda-orange">
                                                                    <span class="fa fa-lightbulb-o" />
                                                                    #{msgs.badgePriority2}
                                                                </span>
                                                            </h:panelGroup>

                                                            <h:panelGroup rendered="#{item.prioritaet gt 2 and AktuelleSchritteForm.batchHelper.currentStep.prioritaet lt 10}">
                                                                <span class="badge badge-intranda-orange">
                                                                    <span class="fa fa-lightbulb-o" />
                                                                    #{msgs.badgePriority3}
                                                                </span>
                                                            </h:panelGroup>

                                                            <h:panelGroup rendered="#{item.prioritaet gt 9}">
                                                                <span class="badge badge-intranda-red">
                                                                    <span class="fa fa-bullhorn" />
                                                                    #{msgs.badgeCorrection}
                                                                </span>
                                                            </h:panelGroup>
                                                        </h:panelGroup>

                                                        <h:outputText
                                                            value="#{msgs.bearbeitungsbeginn}:"
                                                            rendered="#{item.bearbeitungsbeginn !=null and !HelperForm.anonymized}" />
                                                        <h:outputText
                                                            value="#{item.bearbeitungsbeginnAsFormattedString}"
                                                            rendered="#{item.bearbeitungsbeginn !=null and !HelperForm.anonymized}">
                                                        </h:outputText>

                                                        <h:outputText
                                                            value="#{msgs.zuletztBearbeitet}:"
                                                            rendered="#{item.bearbeitungszeitpunkt !=null and !HelperForm.anonymized}" />
                                                        <h:outputText
                                                            value="#{item.bearbeitungszeitpunktAsFormattedString}"
                                                            rendered="#{item.bearbeitungszeitpunkt !=null and !HelperForm.anonymized}">
                                                        </h:outputText>

                                                        <h:outputText
                                                            value="#{msgs.letzteAktualisierungDurch}:"
                                                            rendered="#{item.bearbeitungsbenutzer.id !=0 and item.bearbeitungsbenutzer !=null and !HelperForm.anonymized}" />
                                                        <h:outputText
                                                            value="#{item.bearbeitungsbenutzer.nachVorname}"
                                                            rendered="#{item.bearbeitungsbenutzer.id !=0 and item.bearbeitungsbenutzer !=null and !HelperForm.anonymized}" />

                                                        <h:outputText value="#{msgs.aktualisierungstyp}:" />
                                                        <h:outputText value="#{item.editTypeEnum.title}" />

                                                        <h:outputText
                                                        	value="#{msgs.typ}:"
                                                        	rendered="#{item.typeSpecified}" />
                                                        <h:panelGroup rendered="#{item.typeSpecified}" >
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.metadaten}"
                                                                rendered="#{item.typMetadaten}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.importMittelsFileUpload}"
                                                                rendered="#{item.typImportFileUpload}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.exportDMS}"
                                                                rendered="#{item.typExportDMS}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.schrittBeimAnnehmenAbschliessen}"
                                                                rendered="#{item.typBeimAnnehmenAbschliessen}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.beimAnnehmenModulStarten}"
                                                                rendered="#{item.typBeimAnnehmenModul}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.beimAnnehmenModulStartenUndSchrittAbschliessen}"
                                                                rendered="#{item.typBeimAnnehmenModulUndAbschliessen}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.imagesLesen}"
                                                                rendered="#{item.typImagesLesen}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.imagesSchreiben}"
                                                                rendered="#{item.typImagesSchreiben}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.beimAbschliessenVerifizieren}"
                                                                rendered="#{item.typBeimAbschliessenVerifizieren}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.automatischerSchritt}"
                                                                rendered="#{item.typAutomatisch}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.typeThumbnailStep}"
                                                                rendered="#{item.typAutomaticThumbnail}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.typScriptStep}"
                                                                rendered="#{item.typScriptStep}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.modulSchritt}: #{item.typModulName}"
                                                                rendered="#{item.typModulName!=null and item.typModulName!=''}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.stepPlugin}: #{item.stepPlugin}"
                                                                rendered="#{item.stepPlugin!=null and item.stepPlugin!=''}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.validationPlugin}"
                                                                rendered="#{item.validationPlugin!=null and item.validationPlugin!=''}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.timeDelayPlugin}"
                                                                rendered="#{item.delayStep}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.batchStep}"
                                                                rendered="#{item.batchStep}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.updateMetadataIndex}"
                                                                rendered="#{item.updateMetadataIndex}" />
                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.process_generateDocket}"
                                                                rendered="#{item.generateDocket}" />

                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs.httpStep}"
                                                                rendered="#{item.httpStep}" />

                                                            <h:outputText
                                                                styleClass="block"
                                                                value="#{msgs['queue_'.concat(item.messageQueue.name)]}"
                                                                rendered="#{item.messageQueue ne 'NONE'}" />

                                                        </h:panelGroup>

                                                        <h:outputText
                                                            value="#{msgs.typScriptStep}:"
                                                            rendered="#{item.typScriptStep and not empty item.allScriptPaths}" />
                                                        <h:panelGroup rendered="#{item.typScriptStep and not empty item.allScriptPaths}">

                                                            <h:panelGroup
                                                                styleClass="block"
                                                                rendered="#{item.typAutomatischScriptpfad != null and item.typAutomatischScriptpfad != ''}">
                                                                <h:outputText value="#{item.scriptname1}" />
                                                                <h:outputText
                                                                    styleClass="font-light "
                                                                    value=" #{item.typAutomatischScriptpfad}" />
                                                            </h:panelGroup>

                                                            <h:panelGroup
                                                                styleClass="block"
                                                                rendered="#{item.typAutomatischScriptpfad2 != null and item.typAutomatischScriptpfad2 != ''}">
                                                                <h:outputText value="#{item.scriptname2}" />
                                                                <h:outputText
                                                                    styleClass="font-light "
                                                                    value=" #{item.typAutomatischScriptpfad2}" />
                                                            </h:panelGroup>

                                                            <h:panelGroup
                                                                styleClass="block"
                                                                rendered="#{item.typAutomatischScriptpfad3 != null and item.typAutomatischScriptpfad3 != ''}">
                                                                <h:outputText value="#{item.scriptname3}" />
                                                                <h:outputText
                                                                    styleClass="font-light "
                                                                    value=" #{item.typAutomatischScriptpfad3}" />
                                                            </h:panelGroup>

                                                            <h:panelGroup
                                                                styleClass="block"
                                                                rendered="#{item.typAutomatischScriptpfad4 != null and item.typAutomatischScriptpfad4 != ''}">
                                                                <h:outputText value="#{item.scriptname4}" />
                                                                <h:outputText
                                                                    styleClass="font-light "
                                                                    value=" #{item.typAutomatischScriptpfad4}" />
                                                            </h:panelGroup>

                                                            <h:panelGroup
                                                                styleClass="block"
                                                                rendered="#{item.typAutomatischScriptpfad5 != null and item.typAutomatischScriptpfad5 != ''}">
                                                                <h:outputText value="#{item.scriptname5}" />
                                                                <h:outputText
                                                                    styleClass="font-light "
                                                                    value=" #{item.typAutomatischScriptpfad5}" />
                                                            </h:panelGroup>

                                                        </h:panelGroup>

                                                        <h:outputText
                                                            value="#{msgs.module}:"
                                                            rendered="#{item.typModulName != null and item.typModulName != ''}" />
                                                        <h:outputText
                                                            value="#{item.typModulName}"
                                                            rendered="#{item.typModulName != null and item.typModulName != ''}" />

                                                        <h:outputText value="#{msgs.usergroup_assignedRoles}"
                                                       		rendered="#{not empty item.benutzergruppen}" />
                                                        <h:panelGroup rendered="#{not empty item.benutzergruppen}" >
                                                            <x:dataList
                                                                value="#{item.benutzergruppen}"
                                                                var="group"
                                                                rowCountVar="count"
                                                                rowIndexVar="index">
                                                                <h:outputText value="#{group.titel}" />
                                                                <h:outputText
                                                                    value=", "
                                                                    rendered="#{index lt count-1}"></h:outputText>
                                                            </x:dataList>
                                                        </h:panelGroup>
                                                    </h:panelGrid>

                                                </div>
                                            </div>

                                        </h:panelGroup>
                                    </h:panelGroup>
                                </h:column>
                                <!-- +++++++++++++++++  // alle Eigenschaften auflisten mit CSS ++++++++++++++++++++++++ -->

                                <x:column style="min-width:80px;">
                                    <f:facet name="header">
                                        <h:outputText value="#{msgs.status}" />
                                    </f:facet>

                                    <ul class="colors small">
                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'LOCKED'}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{msgs.statusGesperrt}"
                                                rel="tooltip"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'OPEN'}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{msgs.statusOffen}"
                                                rel="tooltip"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'DONE' and HelperForm.anonymized}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{item.bearbeitungsstatusEnum.title}: #{item.editTypeEnum.title}"
                                                rel="tooltip"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'INWORK' and HelperForm.anonymized}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{item.bearbeitungsstatusEnum.title}: #{item.editTypeEnum.title}"
                                                rel="tooltip"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'DONE' and !HelperForm.anonymized}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{item.bearbeitungsstatusEnum.title}: #{item.bearbeitungsbenutzer!=null and item.bearbeitungsbenutzer.id!=0?item.bearbeitungsbenutzer.nachVorname:''} (#{item.bearbeitungszeitpunkt !=null?item.bearbeitungszeitpunktAsFormattedString:''})  - #{item.editTypeEnum.title}"
                                                rel="tooltip"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'INWORK' and !HelperForm.anonymized}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{item.bearbeitungsstatusEnum.title}: #{item.bearbeitungsbenutzer!=null and item.bearbeitungsbenutzer.id!=0?item.bearbeitungsbenutzer.nachVorname:''} (#{item.bearbeitungszeitpunkt !=null?item.bearbeitungszeitpunktAsFormattedString:''})  - #{item.editTypeEnum.title}"
                                                rel="tooltip"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'ERROR' and !HelperForm.anonymized}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{item.bearbeitungsstatusEnum.title}: #{item.bearbeitungsbenutzer!=null and item.bearbeitungsbenutzer.id!=0?item.bearbeitungsbenutzer.nachVorname:''} (#{item.bearbeitungszeitpunkt !=null?item.bearbeitungszeitpunktAsFormattedString:''})  - #{item.editTypeEnum.title}"
                                                rel="tooltip"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'DEACTIVATED'}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{msgs.statusDeactivated}"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{item.bearbeitungsstatusEnum == 'INFLIGHT'}">
                                            <li
                                                class="#{(LoginForm.myBenutzer.uiMode=='low_vision'?('easy-read-'):('')).concat(item.bearbeitungsstatusEnum.color)}"
                                                title="#{msgs.statusInFlight}"
                                                data-toggle="tooltip"></li>
                                        </h:panelGroup>

                                    </ul>
                                    <h:outputText
                                        value="#{item.bearbeitungsstatusEnum.title}"
                                        rendered="#{LoginForm.myBenutzer.uiMode=='low_vision'}" />
                                    <!-- Bearbeitungsstatus hoch und runter -->
                                    <button
                                        type="button"
                                        class="button-link"
                                        jsf:id="statusDown"
                                        jsf:action="#{ProzessverwaltungForm.stepStatusDown}"
                                        jsf:rel="tooltip"
                                        title="#{msgs.statusRunterSetzen}"
                                        aria-label="#{msgs.statusRunterSetzen}"
                                        jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit')}">
                                        <span class="fa fa-chevron-left font-light margin-left-5" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchrittReload}"
                                            value="#{item}" />
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:ajax render="@form" />
                                    </button>

                                    <!-- Bearbeitungsstatus hoch und runter -->
                                    <button
                                        type="button"
                                        class="button-link"
                                        jsf:id="statusUp"
                                        jsf:action="#{ProzessverwaltungForm.stepStatusUp}"
                                        jsf:rel="tooltip"
                                        title="#{msgs.statusHoeherSetzen}"
                                        aria-label="#{msgs.statusHoeherSetzen}"
                                        jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit')}">
                                        <span class="fa fa-chevron-right font-light margin-left-5" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchrittReload}"
                                            value="#{item}" />
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <f:ajax render="@form" />
                                    </button>


                                </x:column>

                                <h:column rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit')}">
                                    <f:facet name="header">
                                        <h:outputText value="#{msgs.auswahl}" />
                                    </f:facet>
                                    <!-- Bearbeiten-Schaltknopf -->
                                    <button
                                        jsf:id="editStep"
                                        aria-label="#{msgs.detailsDesSchritts}"
                                        jsf:action="process_edit_step"
                                        title="#{msgs.detailsDesSchritts}"
                                        class="btn button-schaltknopf margin-right-5">
                                        <span class="fa fa-pencil" />
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchrittReload}"
                                            value="#{item}" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.modusBearbeiten}"
                                            value="" />
                                    </button>

                                    <button
                                        jsf:id="runPlugin"
                                        title="#{msgs.executePlugin}"
                                        aria-label="#{msgs.executePlugin}"
                                        jsf:rendered="#{item.stepPlugin != '' and item.stepPlugin != null  and !item.typExportDMS}"
                                        jsf:action="#{ProzessverwaltungForm.startPlugin}"
                                        onclick="preventDoubleSubmit(this);"
                                        class="btn button-link blue">
                                        <span class="fa fa-puzzle-piece" style="font-size: 12px"></span>
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <x:updateActionListener
                                            property="#{NavigationForm.uiStatus.pluginSimulation}"
                                            value="#{true}" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchrittReload}"
                                            value="#{item}" />
                                    </button>

                                    <button
                                        jsf:id="executeScript"
                                        title="#{msgs.executeScripts}"
                                        aria-label="#{msgs.executeScripts}"
                                        jsf:rendered="#{item.typScriptStep and item.typAutomatischScriptpfad != null and item.typAutomatischScriptpfad != ''}"
                                        jsf:action="#{HelperForm.executeScriptsForStep(item.id)}"
                                        onclick="preventDoubleSubmit(this);"
                                        class="btn button-link blue">
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <span class="fa fa-cog margin-right-5"></span>
                                    </button>

                                    <button
                                        jsf:id="executeHttp"
                                        title="#{msgs.executeHttpCalls}"
                                        jsf:rendered="#{item.httpStep}"
                                        jsf:action="#{HelperForm.executeHttpCallForStep(item.id)}"
                                        onclick="preventDoubleSubmit(this);"
                                        class="btn button-link blue">
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <span class="fa fa-cog margin-right-5"></span>
                                    </button>


                                    <button
                                        jsf:id="exportProcess"
                                        title="#{msgs.exportDMS}"
                                        aria-label="#{msgs.exportDMS}"
                                        jsf:rendered="#{!ProzessverwaltungForm.myProzess.istTemplate and LoginForm.hasRole('Workflow_Processes_Allow_Export') and item.typExportDMS}"
                                        jsf:action="#{ProzessverwaltungForm.exportStep}"
                                        onclick="preventDoubleSubmit(this);"
                                        class="btn button-link blue">
                                        <f:passThroughAttribute
                                            name="data-toggle"
                                            value="tooltip" />
                                        <x:updateActionListener
                                            property="#{ProzessverwaltungForm.mySchritt}"
                                            value="#{item}" />

                                        <span class="fa fa-globe margin-right-5"></span>
                                    </button>

                                </h:column>

                            </x:dataTable>

                            <div class="dataTables_info">
                                <!-- Neu-Schaltknopf -->
                                <button
                                    jsf:id="addStepLink"
                                    class="btn btn-primary font-size-s margin-right-5"
                                    jsf:action="#{ProzessverwaltungForm.SchrittNeu}"
                                    title="#{msgs.schrittHinzufuegen}"
                                    jsf:rendered="#{LoginForm.hasRole('Workflow_General_Details_Edit') and (ProzessverwaltungForm.myProzess.titel != '')}">
                                    <span class="fa fa-plus margin-right-5" />
                                    <h:outputText value="#{msgs.schrittHinzufuegen}" />
                                </button>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>



    </composite:implementation>

</ui:composition>